"use strict";angular.module("adama-toolkit",["ngSanitize","ngMessages","ui.router","ui.bootstrap","pascalprecht.translate","ngCookies","ngResource","LocalStorageModule","ngTable","ngFileSaver","angular-loading-bar"]),angular.module("adama-toolkit").config(["$urlRouterProvider",function(t){t.otherwise("/app/")}]),angular.module("adama-toolkit").run(["$rootScope",function(t){t.additionalBodyClass="sidebar-mini",t.$on("$stateChangeSuccess",function(e,a){a&&a.name&&0===a.name.indexOf("auth")?t.additionalBodyClass="login-page":t.additionalBodyClass="sidebar-mini"})}]),angular.module("adama-toolkit").run(["$rootScope","appGlobal",function(t,e){t.$on("$stateChangeSuccess",function(t,a){a&&a.data&&a.data.pageTitle&&e.setPageTitle(a.data.pageTitle)})}]),angular.module("adama-toolkit").config(["$translateProvider",function(t){t.useSanitizeValueStrategy("escapeParameters"),t.useLocalStorage(),t.registerAvailableLanguageKeys(["en","fr"],{"en_*":"en","fr_*":"fr"}),t.determinePreferredLanguage()}]),angular.module("adama-toolkit").config(["$stateProvider",function(t){t.state("app",{"abstract":!0,url:"/app",template:'<div class="wrapper">	<ark-header></ark-header>	<aside class="main-sidebar">		<section class="sidebar">			<main-navigation></main-navigation>		</section>	</aside>	<jh-alert></jh-alert>	<ui-view></ui-view>	<ark-footer></ark-footer>	<layout-fix add-event="true"></layout-fix></div>',resolve:{authorize:["Auth",function(t){return t.authorize()}]}})}]),angular.module("adama-toolkit").run(["ngTableDefaults",function(t){t.settings=angular.extend({},t.settings,{counts:[10,20,50]}),t.params=angular.extend({},t.params,{page:1,count:20})}]),angular.module("adama-toolkit").config(["$translateProvider",function(t){t.translations("fr",{MENU_CATEGORY_USERS:"Utilisateurs",PAGER_RESULT:"{{ total }} entrées",FLAG_EN:"Anglais",FLAG_CN:"Chinois",FLAG_FR:"Français"}),t.translations("en",{MENU_CATEGORY_USERS:"Users",PAGER_RESULT:"{{ total }} entries",FLAG_EN:"English",FLAG_CN:"Chinese",FLAG_FR:"French"})}]),angular.module("adama-toolkit").config(["$stateProvider",function(t){t.state("app.personal",{"abstract":!0,url:"/personal",template:"<ui-view></ui-view>"})}]),angular.module("adama-toolkit").controller("AccessDeniedCtrl",function(){}),angular.module("adama-toolkit").config(["$stateProvider",function(t){t.state("auth",{"abstract":!0,url:"/auth",template:"<ui-view></ui-view>"}),t.state("auth.signin",{url:"/",templateUrl:"adama-toolkit/auth/signin.html",controller:"SigninCtrl",controllerAs:"ctrl",data:{pageTitle:"SIGNIN",authorities:[]}}),t.state("auth.recoverPassword",{url:"/recoverPassword",templateUrl:"adama-toolkit/auth/recoverPassword.html",controller:"RecoverPasswordCtrl",controllerAs:"ctrl",data:{pageTitle:"RECOVER",authorities:[]}}),t.state("auth.accessDenied",{url:"/accessDenied",templateUrl:"adama-toolkit/auth/accessDenied.html",controller:"AccessDeniedCtrl",controllerAs:"ctrl",data:{pageTitle:"ACCESS_DENIED",authorities:[]}})}]),angular.module("adama-toolkit").config(["$translateProvider",function(t){t.translations("fr",{SIGNIN:"Identification",SIGNIN_INTRO:"Identifiez-vous pour démarrer votre session",SIGNIN_FORGET_PASSWORD:"J'ai oublié mon mot de passe ...",SIGNIN_USERNAME:"Identifiant",SIGNIN_USERNAME_REQUIRED:"L'identifiant est obligatoire",SIGNIN_PASSWORD:"Mot de passe",SIGNIN_PASSWORD_REQUIRED:"Le mot de passe est obligatoire",SIGNIN_SUBMIT:"Démarrer la session",SIGNIN_ERROR:"Erreur d'authentification : identifiant ou mot de passe incorrect.",RECOVER:"Récupération de mot de passe",RECOVER_INTRO:"Saisissez votre email pour récupérer votre mot de passe",RECOVER_MAIL:"Email",RECOVER_MAIL_REQUIRED:"L'email est tobligatoire",RECOVER_MAIL_EMAIL:"L'email n'est pas au bon format",RECOVER_SUBMIT:"Récupérer mon mot de passe",RECOVER_BACK_TO_LOGIN:"Retour à l'identificaition",RECOVER_SUCCESS:"Consultez votre email pour connaître comment réinitialiser votre mot de passe.",RECOVER_ERROR:"Erreur lors de la récupération du mot de passe.",RECOVER_ERROR_EMAIL_NOT_EXIST:"L'email n'existe pas",ACCESS_DENIED:"Accès interdit",ACCESS_DENIED_INTRO:"Vous n'avez pas suffisamment de droits d'accéder à cette page."}),t.translations("en",{SIGNIN:"Signin",SIGNIN_INTRO:"Sign in to start your session",SIGNIN_FORGET_PASSWORD:"I forgot my password ...",SIGNIN_USERNAME:"Username",SIGNIN_USERNAME_REQUIRED:"Username is required",SIGNIN_PASSWORD:"Password",SIGNIN_PASSWORD_REQUIRED:"Password is required",SIGNIN_SUBMIT:"Start session",SIGNIN_ERROR:"Authentication error : Username or password are incorrect.",RECOVER:"Recover password",RECOVER_INTRO:"Set your email to recover your password",RECOVER_MAIL:"Email",RECOVER_MAIL_REQUIRED:"Email is required",RECOVER_MAIL_EMAIL:"Email does not respect the right format",RECOVER_SUBMIT:"Retrieve my password",RECOVER_BACK_TO_LOGIN:"Back to signin",RECOVER_SUCCESS:"Check your e-mails for details on how to reset your password.",RECOVER_ERROR:"Recovering error.",RECOVER_ERROR_EMAIL_NOT_EXIST:"E-Mail address isn't registered! Please check and try again",ACCESS_DENIED:"Access denied",ACCESS_DENIED_INTRO:"You do not have enough privileges to access this page."})}]),angular.module("adama-toolkit").controller("RecoverPasswordCtrl",["Auth",function(t){var e=this;e.recover=function(a){e.recoverSuccess=!1,e.recoverError=!1,e.errorEmailNotExists=!1,e.loading=!0,t.resetPasswordInit(a).then(function(){e.recoverSuccess=!0})["catch"](function(t){400===t.status&&"e-mail address not registered"===t.data?e.errorEmailNotExists=!0:e.recoverError=!0})["finally"](function(){e.loading=!1})}}]),angular.module("adama-toolkit").controller("SigninCtrl",["$rootScope","$state","Auth",function(t,e,a){var r=this;r.signin=function(o,n){r.authenticationError=!1,a.login({username:o,password:n}).then(function(){"auth.signin"===t.previousStateName?e.go("app.main"):t.back()})["catch"](function(){r.authenticationError=!0})}}]),angular.module("adama-toolkit").config(["$translateProvider",function(t){t.translations("fr",{CRUD_BACK_TO_LIST:"Retour à la liste",CRUD_CANCEL:"Annuler",CRUD_CONFIRM_DELETE:"Confirmer la suppression",CRUD_CONFIRM_EDIT:"Editer",CRUD_CONFIRM_SAVE:"Créer",CRUD_DELETE_MESSAGE:"Etes-vous certain de vouloir supprimer ?",CRUD_DELETE_SUCCESS:"Suppression avec succès.",CRUD_DELETE_ERROR:"Erreur, impossible de supprimer.",CRUD_NEW:"Nouveau",CRUD_MASS_IMPORT:"Import massif",CRUD_MASS_EXPORT:"Export massif",CRUD_EDIT_SUCCESS:"Enregistrement avec succès.",CRUD_NEW_SUCCESS:"Création avec succès.",CRUD_SAVE_ERROR:"Erreur, impossible de sauvegarder.",CRUD_FORM_ERROR_REQUIRED:"Le champs est obligatoire.",CRUD_FORM_ERROR_MAXLENGTH:"Le champs ne doit pas dépasser {{ maxlength }} caractères.",CRUD_FORM_ERROR_EMAIL:"Le format est invalide.",CRUD_FORM_SEARCH:"Recherche",CRUD_FORM_SEARCH_SUBMIT:"Rechercher",CRUD_ACTION_VIEW:"Détails",CRUD_ACTION_EDIT:"Editer",CRUD_ACTION_DELETE:"Supprimer"}),t.translations("en",{CRUD_BACK_TO_LIST:"Back to list",CRUD_CANCEL:"Cancel",CRUD_CONFIRM_DELETE:"Confirm delete",CRUD_CONFIRM_EDIT:"Edit",CRUD_CONFIRM_SAVE:"Save",CRUD_DELETE_MESSAGE:"Are you sure you want to delete ?",CRUD_DELETE_SUCCESS:"Delete successfull.",CRUD_DELETE_ERROR:"Error, impossible to delete.",CRUD_NEW:"New",CRUD_MASS_IMPORT:"Mass import",CRUD_MASS_EXPORT:"Mass export",CRUD_EDIT_SUCCESS:"Save successfull.",CRUD_NEW_SUCCESS:"Creation successful.",CRUD_SAVE_ERROR:"Error, impossible to save.",CRUD_FORM_ERROR_REQUIRED:"This field is required.",CRUD_FORM_ERROR_MAXLENGTH:"This field cannot be longer than {{ maxlength }} characters.",CRUD_FORM_ERROR_EMAIL:"Format is invalid.",CRUD_FORM_SEARCH:"Search",CRUD_FORM_SEARCH_SUBMIT:"Search",CRUD_ACTION_VIEW:"View details",CRUD_ACTION_EDIT:"Edit",CRUD_ACTION_DELETE:"Delete"})}]),angular.module("adama-toolkit").directive("btnCreate",function(){return{templateUrl:"adama-toolkit/crud/btn-create.html",restrict:"E"}}),angular.module("adama-toolkit").directive("crudActionDropdown",function(){return{scope:{},bindToController:{routeMapping:"="},controller:function(){},controllerAs:"ctrl",templateUrl:"adama-toolkit/crud/crud-action-dropdown.html",restrict:"E"}}),angular.module("adama-toolkit").controller("CrudDeleteCtrl",["$scope","entity","AlertService",function(t,e,a){var r=this;r.entity=e,r.dismiss=function(){t.$dismiss()},r.confirmDelete=function(){e.$delete().then(function(e){a.success("CRUD_DELETE_SUCCESS"),t.$close(e)})["catch"](function(){a.error("CRUD_DELETE_ERROR")})}}]),angular.module("adama-toolkit").controller("CrudEditCtrl",["$scope","entity","EntityGenericResource","AlertService",function(t,e,a,r){var o=this;o.isEdition=!!e,o.entity=e,o.dismiss=function(){t.$dismiss()},o.save=function(){var e;e=o.isEdition?a.update:a.save,e(o.entity).$promise.then(function(e){o.isEdition?r.success("CRUD_EDIT_SUCCESS"):r.success("CRUD_NEW_SUCCESS"),t.$close(e)})}}]),angular.module("adama-toolkit").controller("CrudListCtrl",["EntityGenericResource","NgTableParams",function(t,e){var a=this;a.tableParams=new e({},{total:0,getData:function(e,a){var r=a.sorting(),o=["id,asc"];if(!angular.equals({},r))for(var n in r)r.hasOwnProperty(n)&&o.unshift(n+","+r[n]);t.query({page:a.page()-1,size:a.count(),sort:o}).$promise.then(function(t){a.total(t.$metadata.totalItems),e.resolve(t)})}}),a.search=function(){a.tableParams.page(1),a.tableParams.reload()}}]),angular.module("adama-toolkit").directive("crudSearchField",function(){return{templateUrl:"adama-toolkit/crud/crud-search-field.html",restrict:"E"}}),angular.module("adama-toolkit").controller("CrudViewCtrl",["$scope","entity",function(t,e){var a=this;a.entity=e,a.dismiss=function(){t.$dismiss()}}]),angular.module("adama-toolkit").directive("modalBtnBackToList",function(){return{templateUrl:"adama-toolkit/crud/modal-btn-back-to-list.html",restrict:"E"}}),angular.module("adama-toolkit").directive("modalBtnCancel",function(){return{templateUrl:"adama-toolkit/crud/modal-btn-cancel.html",restrict:"E"}}),angular.module("adama-toolkit").directive("modalBtnConfirmDelete",function(){return{templateUrl:"adama-toolkit/crud/modal-btn-confirm-delete.html",restrict:"E"}}),angular.module("adama-toolkit").directive("modalBtnConfirmEdit",function(){return{templateUrl:"adama-toolkit/crud/modal-btn-confirm-edit.html",restrict:"E"}}),angular.module("adama-toolkit").directive("dsAuthorities",["$parse",function(t){return{scope:!1,link:function(e,a,r){var o=["ROLE_ADMIN","ROLE_USER","ROLE_MANAGER","ROLE_WORKSHOP","ROLE_CUTTER","ROLE_SHIPPING","ROLE_OFFICE","ROLE_PRESTASHOP"];t(r.data).assign(e,o)}}}]),angular.module("adama-toolkit").directive("dsLanguage",["$parse","language",function(t,e){return{scope:!1,link:function(a,r,o){e.getAll().then(function(e){t(o.data).assign(a,e)})}}}]),angular.module("adama-toolkit").directive("dsPrincipalIdentity",["$parse","Principal",function(t,e){return{scope:!1,link:function(a,r,o){e.identity().then(function(e){t(o.data).assign(a,e)})}}}]),angular.module("adama-toolkit").directive("layoutFix",["$rootScope",function(t){return{scope:{addEvent:"="},restrict:"E",link:function(e){e.addEvent&&t.$on("$viewContentLoaded",function(){$.AdminLTE.layout.fix()}),$.AdminLTE.layout.fix()}}}]),angular.module("adama-toolkit").directive("lazyControl",["$rootScope","$filter",function(t,e){var a=e("translate");return{link:function(e,r,o){var n,i,s,l;"checkbox"===o.type?(r.wrap('<div class="checkbox"><label></label></div>'),r.after("<span></span>"),l=r.next().eq(0)):(n=o.ngModel.replace(/\./g,"_"),i=' for="'+n+'"',s=o.labelScreenOnly||!1,s&&(i+=' class="sr-only"'),r.attr("id",n),r.addClass("form-control"),r.wrap('<div class="form-group"></div>'),r.before("<label"+i+"></label>"),l=r.prev().eq(0)),l.html(a(o.lazyControlLabelKey)),t.$on("$translateChangeSuccess",function(){l.html(a(o.lazyControlLabelKey))})}}}]),angular.module("adama-toolkit").run(["$rootScope","$state","Principal","Auth",function(t,e,a,r){t.$on("$stateChangeStart",function(e,o,n){t.toState=o,t.toStateParams=n,a.isIdentityResolved()&&r.authorize()}),t.$on("$stateChangeSuccess",function(e,a,r,o,n){"auth.signin"!==a.name&&t.previousStateName&&(t.previousStateName=o.name,t.previousStateParams=n)}),t.back=function(){null===e.get(t.previousStateName)?e.go("app.main"):e.go(t.previousStateName,t.previousStateParams)}}]),angular.module("adama-toolkit").config(["$httpProvider",function(t){t.interceptors.push("errorHandlerInterceptor"),t.interceptors.push("authExpiredInterceptor"),t.interceptors.push("authInterceptor"),t.interceptors.push("notificationInterceptor")}]),angular.module("adama-toolkit").constant("jHipsterConstant",{apiBase:"http://localhost:13337/",appModule:"mySuperApp"}),angular.module("adama-toolkit").factory("jHipsterResourceConfig",["ParseLinks",function(t){return{query:{method:"GET",isArray:!0,transformResponse:function(e,a,r){return e=angular.fromJson(e),200===r&&(e.$metadata={links:t.parse(a("link")),totalItems:a("X-Total-Count")}),e},interceptor:{response:function(t){return t.resource.$metadata=t.data.$metadata,t.resource}}},get:{method:"GET"},save:{method:"POST"},update:{method:"PUT"},"delete":{method:"DELETE",params:{id:"@id"}}}}]),angular.module("adama-toolkit").factory("appGlobal",["$rootScope","$translate",function(t,e){var a={};return a.setPageTitle=function(a){e(a).then(function(e){t.pageTitle=e})},a}]),angular.module("adama-toolkit").provider("language",function(){var t=["en","fr"],e=[{code:"en",labelKey:"FLAG_EN",cssCLass:"us"},{code:"fr",labelKey:"FLAG_FR",cssCLass:"fr"}];this.setLanguages=function(e){t=e},this.setSelectorData=function(t){e=t},this.$get=["$q","$http","$translate",function(a,r,o){var n={};return n.getCurrent=function(){var t=o.storage().get("NG_TRANSLATE_LANG_KEY");return angular.isUndefined(t)&&(t="en"),a.when(t)},n.getAll=function(){return a.when(t)},n.getSelectorData=function(){return a.when(e)},n}]}),angular.module("adama-toolkit").config(["$stateProvider",function(t){t.state("app.user",{url:"/users",templateUrl:"adama-toolkit/user/user-list.html",controller:"CrudListCtrl",controllerAs:"ctrl",resolve:{EntityGenericResource:["User",function(t){return t}]},data:{pageTitle:"USER_TITLE_LIST",authorities:["ROLE_MANAGER","ROLE_ADMIN"]}});var e=function(t,e,a,r,o,n){var i;r&&(i=["User",function(t){return t.get({login:a.login}).$promise}]),e.open({templateUrl:"adama-toolkit/user/"+n,resolve:{entity:i,EntityGenericResource:["User",function(t){return t}]},controller:o+" as ctrl"}).result.then(function(){t.go("^",{},{reload:!0})})["catch"](function(){t.go("^")})};t.state("app.user.edit",{url:"/edit/:login",onEnter:["$state","$uibModal","$stateParams",function(t,a,r){e(t,a,r,!0,"CrudEditCtrl","user-edit.html")}],data:{pageTitle:"USER_TITLE_EDIT",authorities:["ROLE_MANAGER","ROLE_ADMIN"]}}),t.state("app.user.create",{url:"/new",onEnter:["$state","$uibModal","$stateParams",function(t,a,r){e(t,a,r,!1,"CrudEditCtrl","user-edit.html")}],data:{pageTitle:"USER_TITLE_NEW",authorities:["ROLE_MANAGER","ROLE_ADMIN"]}}),t.state("app.user.view",{url:"/view/:login",onEnter:["$state","$uibModal","$stateParams",function(t,a,r){e(t,a,r,!0,"CrudViewCtrl","user-view.html")}],data:{pageTitle:"USER_TITLE_VIEW",authorities:["ROLE_MANAGER","ROLE_ADMIN"]}}),t.state("app.user.delete",{url:"/delete/:login",onEnter:["$state","$uibModal","$stateParams",function(t,a,r){e(t,a,r,!0,"CrudDeleteCtrl","user-delete.html")}],data:{pageTitle:"USER_TITLE_DELETE",authorities:["ROLE_MANAGER","ROLE_ADMIN"]}})}]),angular.module("adama-toolkit").config(["$translateProvider",function(t){t.translations("fr",{USER_MENU:"Utilisateurs",USER_TITLE_DELETE:"Suppression d'un utilisateur",USER_TITLE_VIEW:"Détails d'un utilisateur",USER_TITLE_LIST:"Liste des utilisateurs",USER_TITLE_EDIT:"Editer un utilisateur",USER_TITLE_NEW:"Créer un utilisateur",USER_FORM_LOGIN:"Identifiant",USER_FORM_FIRSTNAME:"Prénom",USER_FORM_LASTNAME:"Nom de famille",USER_FORM_EMAIL:"Email",USER_FORM_LANGUAGE:"Langue",USER_FORM_AUTHORITIES:"Rôles",USER_LIST_LOGIN:"Identifiant",USER_LIST_MAIL:"Email",USER_LIST_LANGUAGE:"Langue",USER_LIST_AUTHORITIES:"Rôle"}),t.translations("en",{USER_MENU:"Users",USER_TITLE_DELETE:"User delete",USER_TITLE_VIEW:"User details",USER_TITLE_LIST:"User list",USER_TITLE_EDIT:"User edition",USER_TITLE_NEW:"User creation",USER_FORM_LOGIN:"Login",USER_FORM_FIRSTNAME:"Firstname",USER_FORM_LASTNAME:"Lastname",USER_FORM_EMAIL:"Email",USER_FORM_LANGUAGE:"Language",USER_FORM_AUTHORITIES:"Authorities",USER_LIST_LOGIN:"Login",USER_LIST_MAIL:"Email",USER_LIST_LANGUAGE:"Language",USER_LIST_AUTHORITIES:"Authorities"})}]),angular.module("adama-toolkit").config(["$stateProvider",function(t){t.state("app.personal.password",{url:"/password",templateUrl:"adama-toolkit/account/password/password.html",controller:"PasswordCtrl",controllerAs:"ctrl",data:{pageTitle:"ACCOUNT_PASSWORD"}})}]),angular.module("adama-toolkit").config(["$translateProvider",function(t){t.translations("fr",{ACCOUNT_PASSWORD:"Modifier mon mot de passe",ACCOUNT_PASSWORD_TITLE:"Modifier mon mot de passe",ACCOUNT_PASSWORD_NEWPASSWORD:"Mot de passe",ACCOUNT_PASSWORD_NEWPASSWORD_PLACEHOLDER:"Mot de passe ?",ACCOUNT_PASSWORD_NEWPASSWORD_REQUIRED:"Le mot de passe est obligatoire",ACCOUNT_PASSWORD_NEWPASSWORD_MINLENGTH:"Le mot de passe doit être composé d'au moins 5 caractères.",ACCOUNT_PASSWORD_NEWPASSWORD_MAXLENGTH:"Le mot de passe doit être composé d'au plus 50 caractères.",ACCOUNT_PASSWORD_CONFIRM_NEWPASSWORD:"Confirmation du mot de passe",ACCOUNT_PASSWORD_CONFIRM_NEWPASSWORD_PLACEHOLDER:"Confirmation du mot de passe ?",ACCOUNT_PASSWORD_CONFIRM_NEWPASSWORD_REQUIRED:"La confirmation du mot de passe est obligatoire",ACCOUNT_PASSWORD_CONFIRM_NEWPASSWORD_MINLENGTH:"La confirmation du mot de passe doit être composé d'au moins 5 caractères.",ACCOUNT_PASSWORD_CONFIRM_NEWPASSWORD_MAXLENGTH:"La confirmation du mot de passe doit être composé d'au plus 50 caractères.",ACCOUNT_PASSWORD_CONFIRM_NEWPASSWORD_PATTERN:"Les mots de passe ne sont pas égaux.",ACCOUNT_PASSWORD_SUBMIT:"Enregistrer",ACCOUNT_PASSWORD_SAVE_SUCCESS:"Le mot de passe a été changé avec succès.",ACCOUNT_PASSWORD_SAVE_ERROR:"Le mot de passe n'a pu être changé."}),t.translations("en",{ACCOUNT_PASSWORD:"Change my password",ACCOUNT_PASSWORD_TITLE:"Change my password",ACCOUNT_PASSWORD_NEWPASSWORD:"Password",ACCOUNT_PASSWORD_NEWPASSWORD_PLACEHOLDER:"Password ?",ACCOUNT_PASSWORD_NEWPASSWORD_REQUIRED:"Your password is required.",ACCOUNT_PASSWORD_NEWPASSWORD_MINLENGTH:"Your password is required to be at least 5 characters.",ACCOUNT_PASSWORD_NEWPASSWORD_MAXLENGTH:"Your password cannot be longer than 50 characters.",ACCOUNT_PASSWORD_CONFIRM_NEWPASSWORD:"Password confirmation",ACCOUNT_PASSWORD_CONFIRM_NEWPASSWORD_PLACEHOLDER:"Password confirmation ?",ACCOUNT_PASSWORD_CONFIRM_NEWPASSWORD_REQUIRED:"Your confirmation password is required.",ACCOUNT_PASSWORD_CONFIRM_NEWPASSWORD_MINLENGTH:"Your confirmation password is required to be at least 5 characters.",ACCOUNT_PASSWORD_CONFIRM_NEWPASSWORD_MAXLENGTH:"Your confirmation password cannot be longer than 50 characters.",ACCOUNT_PASSWORD_CONFIRM_NEWPASSWORD_PATTERN:"Password and confirmation do not match.",ACCOUNT_PASSWORD_SUBMIT:"Save",ACCOUNT_PASSWORD_SAVE_SUCCESS:"Password successfully changed.",ACCOUNT_PASSWORD_SAVE_ERROR:"Password could not be changed."})}]),angular.module("adama-toolkit").controller("PasswordCtrl",["Auth","Principal","AlertService",function(t,e,a){var r=this;e.identity().then(function(t){r.account=t}),r.changePassword=function(){t.changePassword(r.password).then(function(){a.success("ACCOUNT_PASSWORD_SAVE_SUCCESS")})["catch"](function(){a.error("ACCOUNT_PASSWORD_SAVE_ERROR")})}}]),angular.module("adama-toolkit").config(["$stateProvider",function(t){t.state("app.personal.settings",{url:"/settings",templateUrl:"adama-toolkit/account/settings/settings.html",controller:"SettingsCtrl",controllerAs:"ctrl",data:{pageTitle:"ACCOUNT_SETTINGS"}})}]),angular.module("adama-toolkit").config(["$translateProvider",function(t){t.translations("fr",{ACCOUNT_SETTINGS:"Mon profil",ACCOUNT_SETTINGS_TITLE:"Mon profil",ACCOUNT_SETTINGS_FIRSTNAME:"Prénom",ACCOUNT_SETTINGS_FIRSTNAME_PLACEHOLDER:"Prénom ?",ACCOUNT_SETTINGS_FIRSTNAME_REQUIRED:"Votre prénom est obligatoire.",ACCOUNT_SETTINGS_FIRSTNAME_MAXLENGTH:"Votre prénom doit être composé d'au plus 50 caractères.",ACCOUNT_SETTINGS_LASTNAME:"Nom de famille",ACCOUNT_SETTINGS_LASTNAME_PLACEHOLDER:"Nom de famille ?",ACCOUNT_SETTINGS_LASTNAME_REQUIRED:"Votre nom de famille est obligatoire.",ACCOUNT_SETTINGS_LASTNAME_MAXLENGTH:"Votre nom de famille doit être composé d'au plus 50 caractères.",ACCOUNT_SETTINGS_EMAIL:"Email",ACCOUNT_SETTINGS_EMAIL_PLACEHOLDER:"Email ?",ACCOUNT_SETTINGS_EMAIL_REQUIRED:"Votre email est obligatoire.",ACCOUNT_SETTINGS_EMAIL_EMAIL:"Votre email est invalide.",ACCOUNT_SETTINGS_EMAIL_MAXLENGTH:"Votre email doit être composé d'au plus 100 caractères.",ACCOUNT_SETTINGS_LANGUAGE:"Langue",ACCOUNT_SETTINGS_SUBMIT:"Enregistrer",ACCOUNT_SETTINGS_SAVE_SUCCESS:"Enregistrement du profil avec succès.",ACCOUNT_SETTINGS_SAVE_ERROR:"Impossible d'enregistrer le profil."}),t.translations("en",{ACCOUNT_SETTINGS:"My profile",ACCOUNT_SETTINGS_TITLE:"My profile",ACCOUNT_SETTINGS_FIRSTNAME:"First name",ACCOUNT_SETTINGS_FIRSTNAME_PLACEHOLDER:"First name ?",ACCOUNT_SETTINGS_FIRSTNAME_REQUIRED:"Your first name is required.",ACCOUNT_SETTINGS_FIRSTNAME_MAXLENGTH:"Your first name cannot be longer than 50 characters.",ACCOUNT_SETTINGS_LASTNAME:"Last name",ACCOUNT_SETTINGS_LASTNAME_PLACEHOLDER:"Last name ?",ACCOUNT_SETTINGS_LASTNAME_REQUIRED:"Your last name is required.",ACCOUNT_SETTINGS_LASTNAME_MAXLENGTH:"Your last name cannot be longer than 50 characters.",ACCOUNT_SETTINGS_EMAIL:"Email",ACCOUNT_SETTINGS_EMAIL_PLACEHOLDER:"Email ?",ACCOUNT_SETTINGS_EMAIL_REQUIRED:"Your e-mail is required.",ACCOUNT_SETTINGS_EMAIL_EMAIL:"Your e-mail is invalid.",ACCOUNT_SETTINGS_EMAIL_MAXLENGTH:"Your e-mail cannot be longer than 100 characters.",ACCOUNT_SETTINGS_LANGUAGE:"Language",ACCOUNT_SETTINGS_SUBMIT:"Save",ACCOUNT_SETTINGS_SAVE_SUCCESS:"Profile successfully saved.",ACCOUNT_SETTINGS_SAVE_ERROR:"Profile could not be saved."})}]),angular.module("adama-toolkit").controller("SettingsCtrl",["Principal","Auth","language","AlertService","$translate",function(t,e,a,r,o){var n=this,i=function(t){return{activated:t.activated,email:t.email,firstName:t.firstName,langKey:t.langKey,lastName:t.lastName,login:t.login}};t.identity().then(function(t){n.settingsAccount=i(t)}),n.save=function(){e.updateAccount(n.settingsAccount).then(function(){return t.identity(!0).then(function(t){n.settingsAccount=i(t),a.getCurrent().then(function(t){n.settingsAccount.langKey!==t&&o.use(n.settingsAccount.langKey),r.success("ACCOUNT_SETTINGS_SAVE_SUCCESS")})})})["catch"](function(){r.error("ACCOUNT_SETTINGS_SAVE_ERROR")})}}]),angular.module("adama-toolkit").directive("arkFooter",function(){return{templateUrl:"adama-toolkit/ark/ark-footer/ark-footer.html",restrict:"E",scope:{}}}),angular.module("adama-toolkit").config(["$translateProvider",function(t){t.translations("fr",{TOGGLE_NAVIGATION:"Navigation",USERINFO_PROFILE:"Profil",USERINFO_PASSWORD:"Mot de passe",USERINFO_SIGNOUT:"Déconnection"}),t.translations("en",{TOGGLE_NAVIGATION:"Toggle navigation",USERINFO_PROFILE:"Profile",USERINFO_PASSWORD:"Password",USERINFO_SIGNOUT:"Sign out"})}]),angular.module("adama-toolkit").directive("arkHeader",function(){return{templateUrl:"adama-toolkit/ark/ark-header/ark-header.html",restrict:"E",scope:{}}}),angular.module("adama-toolkit").directive("languageSelector",function(){return{templateUrl:"adama-toolkit/ark/language-selector/language-selector.html",restrict:"E",scope:{},bindToController:{},controller:["$rootScope","$translate","language",function(t,e,a){var r=this;r.changeLanguage=function(t){e.use(t)};var o=function(){r.currentLanguage=e.use(),0===r.currentLanguage.indexOf("en")&&(r.currentLanguage="us")};t.$on("$translateChangeSuccess",function(){o()}),o(),a.getSelectorData().then(function(t){r.languages=t})}],controllerAs:"ctrl"}}),angular.module("adama-toolkit").directive("mainNavigation",function(){return{templateUrl:"adama-toolkit/ark/menu/main-navigation.html",restrict:"E",scope:{},bindToController:{},controller:["$rootScope","$filter","menuService",function(t,e,a){var r,o,n=this;r=function(t,a){var r=angular.copy(a);r.subItems=[],o(r.subItems,a.subItems),r.label=e("translate")(r.label),t.push(r)},o=function(t,e){var a,o,n;if(e&&e.length)for(a=0,o=e.length;o>a;a++)n=e[a],r(t,n)};var i=function(){n.menuItems=[];var t=a.getItems();o(n.menuItems,t)};i(),t.$on("$translateChangeSuccess",function(){i()})}],controllerAs:"ctrl"}}),angular.module("adama-toolkit").provider("menuService",function(){var t=[];this.addItem=function(e){"right"!==e.position&&(e.position="left"),t.push(e)},this.$get=function(){var e={};return e.getItems=function(){return t},e}}),angular.module("adama-toolkit").directive("selectAll",function(){return{templateUrl:"adama-toolkit/ark/select-all/select-all.html",restrict:"E",scope:{},bindToController:{entityList:"="},controller:function(){var t=this;t.isAllChecked=!1,t.checkAll=function(){t.isAllChecked=!t.isAllChecked,angular.forEach(t.entityList,function(e){e.isSelected=t.isAllChecked})}},controllerAs:"ctrl"}}),angular.module("adama-toolkit").directive("userInfo",function(){return{templateUrl:"adama-toolkit/ark/user-info/user-info.html",restrict:"E",scope:{},bindToController:{},controller:["$rootScope","$state","Auth",function(t,e,a){var r=this;r.signout=function(){a.logout(),e.go("auth.signin")},t.$on("auth.updateAccount",function(t,e){r.account=e.account})}],controllerAs:"ctrl"}}),angular.module("adama-toolkit").directive("viewAttribute",function(){return{templateUrl:"adama-toolkit/ark/view-attribute/view-attribute.html",restrict:"E",transclude:!0,scope:{},bindToController:{labelKey:"@",value:"=",valueKey:"@value"},controller:function(){},controllerAs:"ctrl"}}),angular.module("adama-toolkit").directive("jhAlert",["AlertService",function(t){return{restrict:"E",template:'<div class="content-wrapper" ng-cloak ng-if="alerts && alerts.length"><div class="box-body"><div ng-repeat="alert in alerts" class="alert alert-dismissible" ng-class="\'alert-\' + alert.type"><button type="button" class="close" data-dismiss="alert" aria-hidden="true">×</button>{{ alert.msg }}</div></div></div>',controller:["$scope",function(e){e.alerts=t.get(),e.$on("$destroy",function(){e.alerts=[]})}]}}]).directive("jhAlertError",["AlertService","$rootScope","$translate",function(t,e,a){return{restrict:"E",template:'<div class="alerts" ng-if="alerts && alerts.length"><div ng-repeat="alert in alerts" class="alert alert-dismissible" ng-class="\'alert-\' + alert.type"><button type="button" class="close" data-dismiss="alert" aria-hidden="true">×</button>{{ alert.msg }}</div></div>',controller:["$scope","jHipsterConstant",function(r,o){r.alerts=[];var n=function(e,a,o){a=a&&null!==a?a:e,r.alerts.push(t.add({type:"danger",msg:a,params:o,timeout:5e3,toast:t.isToast(),scoped:!0},r.alerts))},i=e.$on(o.appModule+".httpError",function(t,e){var r;switch(t.stopPropagation(),e.status){case 0:n("Server not reachable","error.server.not.reachable");break;case 400:var i=e.headers("X-"+o.appModule+"-error"),s=e.headers("X-"+o.appModule+"-params");if(i){var l=a.instant("global.menu.entities."+s);n(i,i,{entityName:l})}else if(e.data&&e.data.fieldErrors)for(r=0;r<e.data.fieldErrors.length;r++){var u=e.data.fieldErrors[r],c=u.field.replace(/\[\d*\]/g,"[]"),d=a.instant(o.appModule+"."+u.objectName+"."+c);n("Field "+d+" cannot be empty","error."+u.message,{fieldName:d})}else e.data&&e.data.message?n(e.data.message,e.data.message,e.data):n(e.data);break;default:n(e.data&&e.data.message?e.data.message:JSON.stringify(e))}});r.$on("$destroy",function(){void 0!==i&&null!==i&&(i(),r.alerts=[])})}]}}]),angular.module("adama-toolkit").provider("AlertService",function(){var t=!1;this.$get=["$timeout","$sce","$translate",function(e,a,r){var o=0,n=[],i=5e3,s=function(){return t},l=function(){n=[]},u=function(){return n},c=function(t,e){return e.splice(t,1)},d=function(t,e){var a=e?e:n;return c(a.map(function(t){return t.id}).indexOf(t),a)},E=function(t){var e={type:t.type,msg:a.trustAsHtml(t.msg),id:t.alertId,timeout:t.timeout,toast:t.toast,position:t.position?t.position:"top right",scoped:t.scoped,close:function(t){return d(this.id,t)}};return e.scoped||n.push(e),e},S=function(t,a){t.alertId=o++,t.msg=r.instant(t.msg,t.params);var n=E(t);return t.timeout&&t.timeout>0&&e(function(){d(t.alertId,a)},t.timeout),n},m=function(e,a,r){return S({type:"success",msg:e,params:a,timeout:i,toast:t,position:r})},_=function(e,a,r){return S({type:"danger",msg:e,params:a,timeout:i,toast:t,position:r})},R=function(e,a,r){return S({type:"warning",msg:e,params:a,timeout:i,toast:t,position:r})},p=function(e,a,r){return S({type:"info",msg:e,params:a,timeout:i,toast:t,position:r})};return{factory:E,isToast:s,add:S,closeAlert:d,closeAlertByIndex:c,clear:l,get:u,success:m,error:_,info:p,warning:R}}],this.showAsToast=function(e){t=e}}),angular.module("adama-toolkit").factory("Auth",["$rootScope","$state","$q","$translate","Principal","AuthServerProvider","Account","Password","PasswordResetInit","PasswordResetFinish",function(t,e,a,r,o,n,i,s,l,u){return{login:function(t,e){var i=e||angular.noop,s=a.defer();return n.login(t).then(function(t){return o.identity(!0).then(function(e){r.use(e.langKey),s.resolve(t)}),i()})["catch"](function(t){return this.logout(),s.reject(t),i(t)}.bind(this)),s.promise},logout:function(){n.logout(),o.authenticate(null),t.previousStateName=void 0,t.previousStateNameParams=void 0},authorize:function(a){return o.identity(a).then(function(){var a=o.isAuthenticated();a&&t.toState.name&&"auth.signin"===t.toState.name&&e.go("app.main"),t.toState.data&&t.toState.data.authorities||a?t.toState.data&&t.toState.data.authorities&&t.toState.data.authorities.length>0&&!o.hasAnyAuthority(t.toState.data.authorities)&&(a?e.go("auth.accessDenied"):(t.previousStateName=t.toState,t.previousStateNameParams=t.toStateParams,e.go("auth.signin"))):e.go("auth.signin")})},updateAccount:function(e,a){var r=a||angular.noop;return i.save(e,function(){return t.$emit("auth.updateAccount",{account:e}),r(e)},function(t){return r(t)}.bind(this)).$promise},changePassword:function(t,e){var a=e||angular.noop;return s.save(t,function(){return a()},function(t){return a(t)}).$promise},resetPasswordInit:function(t,e){var a=e||angular.noop;return l.save(t,function(){return a()},function(t){return a(t)}).$promise},resetPasswordFinish:function(t,e){var a=e||angular.noop;return u.save(t,function(){return a()},function(t){return a(t)}).$promise}}}]),angular.module("adama-toolkit").directive("hasAnyAuthority",["Principal",function(t){return{restrict:"A",link:function(e,a,r){var o=function(){a.removeClass("hidden")},n=function(){a.addClass("hidden")},i=r.hasAnyAuthority.replace(/\s+/g,"").split(","),s=function(e){var a;e&&o(),a=t.hasAnyAuthority(i),a?o():n()};i.length>0&&(s(!0),e.$watch(function(){return t.isAuthenticated()},function(){s(!0)}))}}}]).directive("hasAuthority",["Principal",function(t){return{restrict:"A",link:function(e,a,r){var o=function(){a.removeClass("hidden")},n=function(){a.addClass("hidden")},i=r.hasAuthority.replace(/\s+/g,""),s=function(e){e&&o(),t.hasAuthority(i).then(function(t){t?o():n()})};i.length>0&&(s(!0),e.$watch(function(){return t.isAuthenticated()},function(){s(!0)}))}}}]),angular.module("adama-toolkit").factory("Principal",["$q","Account",function(t,e){var a,r=!1;return{isIdentityResolved:function(){return angular.isDefined(a)},isAuthenticated:function(){return r},hasAuthority:function(e){return r?this.identity().then(function(t){return t.authorities&&-1!==t.authorities.indexOf(e)},function(){return!1}):t.when(!1)},hasAnyAuthority:function(t){if(!r||!a||!a.authorities)return!1;for(var e=0;e<t.length;e++)if(-1!==a.authorities.indexOf(t[e]))return!0;return!1},authenticate:function(t){a=t,r=null!==t},identity:function(o){var n=t.defer();return o===!0&&(a=void 0),angular.isDefined(a)?(n.resolve(a),
n.promise):(e.get().$promise.then(function(t){a=t.data,r=!0,n.resolve(a)})["catch"](function(){a=null,r=!1,n.resolve(a)}),n.promise)}}}]),angular.module("adama-toolkit").factory("authInterceptor",["$rootScope","$q","$location","localStorageService",function(t,e,a,r){return{request:function(t){t.headers=t.headers||{};var e=r.get("token");return e&&e.expires&&e.expires>(new Date).getTime()&&(t.headers["x-auth-token"]=e.token),t}}}]).factory("authExpiredInterceptor",["$rootScope","$q","$injector","localStorageService",function(t,e,a,r){return{responseError:function(t){if(401===t.status&&("invalid_token"===t.data.error||"Unauthorized"===t.data.error)){r.remove("token");var o=a.get("Principal");if(o.isAuthenticated()){var n=a.get("Auth");n.authorize(!0)}}return e.reject(t)}}}]),angular.module("adama-toolkit").factory("errorHandlerInterceptor",["$q","$rootScope","jHipsterConstant",function(t,e,a){return{responseError:function(r){return 401===r.status&&0===r.data.path.indexOf("/api/account")||e.$emit(a.appModule+".httpError",r),t.reject(r)}}}]),angular.module("adama-toolkit").factory("notificationInterceptor",["$q","AlertService","jHipsterConstant",function(t,e,a){return{response:function(t){var r=t.headers("X-"+a.appModule+"-alert");return angular.isString(r)&&e.success(r,{param:t.headers("X-"+a.appModule+"-params")}),t}}}]),angular.module("adama-toolkit").factory("User",["$resource","jHipsterConstant","jHipsterResourceConfig",function(t,e,a){var r=angular.extend({},a,{"delete":{method:"DELETE",params:{login:"@login"}}});return t(e.apiBase+"api/users/:login",{},r)}]),angular.module("adama-toolkit").service("Base64",function(){var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";this.encode=function(e){for(var a,r,o,n,i,s="",l="",u="",c=0;c<e.length;)a=e.charCodeAt(c++),r=e.charCodeAt(c++),l=e.charCodeAt(c++),o=a>>2,n=(3&a)<<4|r>>4,i=(15&r)<<2|l>>6,u=63&l,isNaN(r)?i=u=64:isNaN(l)&&(u=64),s=s+t.charAt(o)+t.charAt(n)+t.charAt(i)+t.charAt(u),a=r=l="",o=n=i=u="";return s},this.decode=function(e){var a,r,o,n,i,s="",l="",u="",c=0;for(e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");c<e.length;)o=t.indexOf(e.charAt(c++)),n=t.indexOf(e.charAt(c++)),i=t.indexOf(e.charAt(c++)),u=t.indexOf(e.charAt(c++)),a=o<<2|n>>4,r=(15&n)<<4|i>>2,l=(3&i)<<6|u,s+=String.fromCharCode(a),64!==i&&(s+=String.fromCharCode(r)),64!==u&&(s+=String.fromCharCode(l)),a=r=l="",o=n=i=u=""}}).factory("StorageService",["$window",function(t){return{get:function(e){return JSON.parse(t.localStorage.getItem(e))},save:function(e,a){t.localStorage.setItem(e,JSON.stringify(a))},remove:function(e){t.localStorage.removeItem(e)},clearAll:function(){t.localStorage.clear()}}}]),angular.module("adama-toolkit").service("ParseLinks",function(){this.parse=function(t){if(0===t.length)throw new Error("input must not be of zero length");var e=t.split(","),a={};return angular.forEach(e,function(t){var e=t.split(";");if(2!==e.length)throw new Error('section could not be split on ";"');var r=e[0].replace(/<(.*)>/,"$1").trim(),o={};r.replace(new RegExp("([^?=&]+)(=([^&]*))?","g"),function(t,e,a,r){o[e]=r});var n=o.page;angular.isString(n)&&(n=parseInt(n));var i=e[1].replace(/rel='(.*)'/,"$1").trim();a[i]=n}),a}}),angular.module("adama-toolkit").factory("AuthServerProvider",["$http","localStorageService","Base64","jHipsterConstant",function(t,e,a,r){return{login:function(a){var o="username="+encodeURIComponent(a.username)+"&password="+encodeURIComponent(a.password);return t.post(r.apiBase+"api/authenticate",o,{headers:{"Content-Type":"application/x-www-form-urlencoded",Accept:"application/json"}}).success(function(t){return e.set("token",t),t})},logout:function(){e.clearAll()},getToken:function(){return e.get("token")},hasValidToken:function(){var t=this.getToken();return t&&t.expires&&t.expires>(new Date).getTime()}}}]),angular.module("adama-toolkit").factory("Account",["$resource","jHipsterConstant",function(t,e){return t(e.apiBase+"api/account",{},{get:{method:"GET",params:{},isArray:!1,interceptor:{response:function(t){return t}}}})}]),angular.module("adama-toolkit").factory("Password",["$resource","jHipsterConstant",function(t,e){return t(e.apiBase+"api/account/change_password",{},{})}]),angular.module("adama-toolkit").factory("PasswordResetInit",["$resource","jHipsterConstant",function(t,e){return t(e.apiBase+"api/account/reset_password/init",{},{})}]),angular.module("adama-toolkit").factory("PasswordResetFinish",["$resource","jHipsterConstant",function(t,e){return t(e.apiBase+"api/account/reset_password/finish",{},{})}]);
//# sourceMappingURL=adama-toolkit-min.js.map
