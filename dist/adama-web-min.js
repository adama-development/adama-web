"use strict";angular.module("adama-web",["ngSanitize","ngMessages","ui.router","ui.bootstrap","pascalprecht.translate","ngCookies","ngResource","LocalStorageModule","ngTable","ngFileSaver","ngFileUpload","angular-jwt","angular-logger","angular-loading-bar"]),angular.module("adama-web").config(["$urlRouterProvider",function(e){e.otherwise("/app/")}]),angular.module("adama-web").run(["$rootScope",function(e){e.additionalBodyClass="sidebar-mini",e.$on("$stateChangeSuccess",function(t,a){a&&a.name&&0===a.name.indexOf("auth")?e.additionalBodyClass="login-page":e.additionalBodyClass="sidebar-mini"})}]),angular.module("adama-web").run(["$rootScope","$filter",function(e,t){var a=t("translate");e.$on("$stateChangeSuccess",function(t,r){r&&r.data&&r.data.pageTitle&&(e.pageTitle=a(r.data.pageTitle))})}]),angular.module("adama-web").config(["$translateProvider",function(e){e.useSanitizeValueStrategy("escapeParameters"),e.useLocalStorage(),e.registerAvailableLanguageKeys(["en","fr"],{"en_*":"en","fr_*":"fr"}),e.determinePreferredLanguage()}]),angular.module("adama-web").config(["$stateProvider",function(e){e.state("app",{abstract:!0,url:"/app",template:'<div class="wrapper">\t<ark-header></ark-header>\t<aside class="main-sidebar">\t\t<section class="sidebar">\t\t\t<main-navigation></main-navigation>\t\t</section>\t</aside>\t<adama-alert></adama-alert>\t<ui-view></ui-view>\t<ark-footer></ark-footer>\t<layout-fix add-event="true"></layout-fix></div>',resolve:{authorize:["Principal",function(e){return e.authorize()}]}})}]),angular.module("adama-web").run(["ngTableDefaults",function(e){e.settings=angular.extend({},e.settings,{counts:[10,20,50]}),e.params=angular.extend({},e.params,{page:1,count:20})}]),angular.module("adama-web").config(["$translateProvider",function(e){e.translations("fr",{MENU_CATEGORY_USERS:"Utilisateurs",PAGER_RESULT:"{{ firstItemIdx }}-{{ lastItemIdx | min:total }} sur {{ total }} entrées",FLAG_EN:"Anglais",FLAG_CN:"Chinois",FLAG_FR:"Français",FILEUPLOAD_DROPZONE_LABEL_MASS_IMPORT:"Déposez un fichier XLS pour le téléverser ou cliquez sur la zone pour sélectionner un fichier XLS.",FILEUPLOAD_DROPZONE_LABEL:"Déposez un fichier pour le téléverser ou cliquez sur la zone pour sélectionner un fichier.",FILEUPLOAD_DROPZONE_LABEL_DROP:"Vous pouvez déposer le fichier.",FILEUPLOAD_RESET:"Retirer le fichier sélectionné et faire une nouvelle sélection.",FILEUPLOAD_UPLOADING:"Téléversement en cours",FILEUPLOAD_ERROR:"Erreur lors du téléversement"}),e.translations("en",{MENU_CATEGORY_USERS:"Users",PAGER_RESULT:"{{ firstItemIdx }}-{{ lastItemIdx | min:total }} on {{ total }} entries",FLAG_EN:"English",FLAG_CN:"Chinese",FLAG_FR:"French",FILEUPLOAD_DROPZONE_LABEL_MASS_IMPORT:"Drop a XLS file on this area to upload it or click the area to select a XLS file.",FILEUPLOAD_DROPZONE_LABEL:"Drop a file on this area to upload it or click the area to select a file.",FILEUPLOAD_DROPZONE_LABEL_DROP:"You can now drop the file",FILEUPLOAD_RESET:"Remove selected file and start over.",FILEUPLOAD_UPLOADING:"Uploading ...",FILEUPLOAD_ERROR:"Error while uploading"})}]),angular.module("adama-web").run(["$rootScope","$state","Principal",function(e,t,a){e.$on("$stateChangeStart",function(r,n,o){a.isAuthenticated()&&0===n.name.indexOf("auth.")&&"auth.accessDenied"!==n.name?(r.preventDefault(),t.go("app.main")):(e.toState=n,e.toStateParams=o,a.isIdentityResolved()&&a.authorize())}),e.$on("$stateChangeSuccess",function(t,a,r,n,o){"auth.signin"!==a.name&&e.previousStateName&&(e.previousStateName=n.name,e.previousStateParams=o)})}]),angular.module("adama-web").config(["$httpProvider",function(e){e.interceptors.push("errorHandlerInterceptor"),e.interceptors.push("authExpiredInterceptor"),e.interceptors.push("authInterceptor"),e.interceptors.push("notificationInterceptor")}]),angular.module("adama-web").config(["logEnhancerProvider",function(e){e.prefixPattern="%s::[%s]>",e.datetimePattern="DD/MM/YYYY HH:mm:ss",e.logLevels={"*":e.LEVEL.OFF}}]),angular.module("adama-web").config(["$stateProvider",function(e){e.state("app.personal",{abstract:!0,url:"/personal",template:"<ui-view></ui-view>"})}]),angular.module("adama-web").component("adamaAlertError",{templateUrl:["adamaConstant",function(e){return e.adamaWebToolkitTemplateUrl.adamaAlertError}],controller:["$rootScope","$scope","$translate","AlertService",function(e,t,a,r){var n=this;n.alerts=[];var o=function(e,t,a){t=t&&null!==t?t:e,n.alerts.push(r.add({type:"danger",msg:t,params:a,timeout:5e3,toast:r.isToast(),scoped:!0},n.alerts))},i=e.$on("Adama.httpError",function(e,t){var r;switch(e.stopPropagation(),t.status){case 0:o("Server not reachable","error.server.not.reachable");break;case 400:var n=t.headers("X-Adama-error"),i=t.headers("X-Adama-params");if(n){var s=a.instant("global.menu.entities."+i);o(n,n,{entityName:s})}else if(t.data&&t.data.fieldErrors)for(r=0;r<t.data.fieldErrors.length;r++){var l=t.data.fieldErrors[r],u=l.field.replace(/\[\d*\]/g,"[]"),c=a.instant("Adama."+l.objectName+"."+u);o("Field "+c+" cannot be empty","error."+l.message,{fieldName:c})}else t.data&&t.data.message?o(t.data.message,t.data.message,t.data):o(t.data);break;default:o(t.data&&t.data.message?t.data.message:JSON.stringify(t))}});t.$on("$destroy",function(){i&&(i(),n.alerts=[])})}]}),angular.module("adama-web").component("adamaAlert",{templateUrl:["adamaConstant",function(e){return e.adamaWebToolkitTemplateUrl.adamaAlert}],controller:["AlertService",function(e){var t=this;t.alerts=e.get()}]}),angular.module("adama-web").provider("AlertService",function(){var e=!1;this.$get=["$timeout","$sce","$translate",function(t,a,r){var n=0,o=[],i=5e3,s=function(){return e},l=function(){o=[]},u=function(){return o},c=function(e,t){return t.splice(e,1)},d=function(e,t){var a=t?t:o;return c(a.map(function(e){return e.id}).indexOf(e),a)},m=function(e){var t={type:e.type,msg:a.trustAsHtml(e.msg),id:e.alertId,timeout:e.timeout,toast:e.toast,position:e.position?e.position:"top right",scoped:e.scoped,close:function(e){return d(this.id,e)}};return t.scoped||o.push(t),t},E=function(e,a){e.alertId=n++,e.msg=r.instant(e.msg,e.params);var o=m(e);return e.timeout&&e.timeout>0&&t(function(){d(e.alertId,a)},e.timeout),o},S=function(t,a,r){return E({type:"success",msg:t,params:a,timeout:i,toast:e,position:r})},R=function(t,a,r){return E({type:"danger",msg:t,params:a,timeout:i,toast:e,position:r})},_=function(t,a,r){return E({type:"warning",msg:t,params:a,timeout:i,toast:e,position:r})},p=function(t,a,r){return E({type:"info",msg:t,params:a,timeout:i,toast:e,position:r})};return{factory:m,isToast:s,add:E,closeAlert:d,closeAlertByIndex:c,clear:l,get:u,success:S,error:R,info:p,warning:_}}],this.showAsToast=function(t){e=t}}),angular.module("adama-web").controller("AccessDeniedCtrl",function(){}),angular.module("adama-web").config(["$stateProvider","adamaConstant",function(e,t){e.state("auth",{abstract:!0,url:"/auth",template:"<ui-view></ui-view>"}),e.state("auth.signin",{url:"/",templateUrl:function(){return t.adamaWebToolkitTemplateUrl.signin},controller:"SigninCtrl",controllerAs:"ctrl",data:{pageTitle:"SIGNIN",authorities:[]}}),e.state("auth.recoverPassword",{url:"/recoverPassword",templateUrl:function(){return t.adamaWebToolkitTemplateUrl.recoverPassword},controller:"RecoverPasswordCtrl",controllerAs:"ctrl",data:{pageTitle:"RECOVER",authorities:[]}}),e.state("auth.accessDenied",{url:"/accessDenied",templateUrl:function(){return t.adamaWebToolkitTemplateUrl.accessDenied},controller:"AccessDeniedCtrl",controllerAs:"ctrl",data:{pageTitle:"ACCESS_DENIED",authorities:[]}}),e.state("auth.resetPassword",{url:"/resetPassword",templateUrl:function(){return t.adamaWebToolkitTemplateUrl.resetPassword},controller:"ResetPasswordCtrl",controllerAs:"ctrl",data:{pageTitle:"RESET_PASSWORD",authorities:[]}})}]),angular.module("adama-web").config(["$translateProvider",function(e){e.translations("fr",{SIGNIN:"Identification",SIGNIN_INTRO:"Identifiez-vous pour démarrer votre session",SIGNIN_FORGET_PASSWORD:"J'ai oublié mon mot de passe ...",SIGNIN_USERNAME:"Identifiant",SIGNIN_USERNAME_REQUIRED:"L'identifiant est obligatoire",SIGNIN_PASSWORD:"Mot de passe",SIGNIN_PASSWORD_REQUIRED:"Le mot de passe est obligatoire",SIGNIN_SUBMIT:"Démarrer la session",SIGNIN_ERROR:"Erreur d'authentification : identifiant ou mot de passe incorrect.",RECOVER:"Récupération de mot de passe",RECOVER_INTRO:"Saisissez votre email pour récupérer votre mot de passe",RECOVER_MAIL:"Email",RECOVER_MAIL_REQUIRED:"L'email est obligatoire",RECOVER_MAIL_EMAIL:"L'email n'est pas au bon format",RECOVER_SUBMIT:"Récupérer mon mot de passe",RECOVER_BACK_TO_LOGIN:"Retour à l'identificaition",RECOVER_SUCCESS:"Consultez votre email pour connaître comment réinitialiser votre mot de passe.",RECOVER_ERROR:"Erreur lors de la récupération du mot de passe.",RECOVER_ERROR_EMAIL_NOT_EXIST:"L'email n'existe pas",ACCESS_DENIED:"Accès interdit",ACCESS_DENIED_INTRO:"Vous n'avez pas suffisamment de droits d'accéder à cette page.",ACCESS_DENIED_BACK_TO_LOGIN:"Retour à l'identificaition",RESET_PASSWORD:"Initialisation du mot de passe",RESET_PASSWORD_INTRO:"Saisissez et confirmez votre mot de passe",RESET_PASSWORD_SUBMIT:"Modifier mon mot de passe",RESET_PASSWORD_PASSWORD:"Mot de passe",RESET_PASSWORD_PASSWORD_REQUIRED:"Le mot de passe est obligatoire",RESET_PASSWORD_PASSWORD_MINLENGTH:"Minimum 6 caractères",RESET_PASSWORD_PASSWORD_MAXLENGTH:"Maximum 100 caractères",RESET_PASSWORD_PASSWORD_CONFIRM:"Confirmation du mot de passe",RESET_PASSWORD_PASSWORD_CONFIRM_REQUIRED:"La confirmation est obligatoire",RESET_PASSWORD_PASSWORD_CONFIRM_MATCH:"La confirmation ne correspond pas",RESET_PASSWORD_ERROR:"Une erreur est intervenue, contactez un administrateur",RESET_PASSWORD_MESSAGE_FOR_MOBILE_USER:"Vous pouvez vous authentifier dans l'application mobile"}),e.translations("en",{SIGNIN:"Signin",SIGNIN_INTRO:"Sign in to start your session",SIGNIN_FORGET_PASSWORD:"I forgot my password ...",SIGNIN_USERNAME:"Username",SIGNIN_USERNAME_REQUIRED:"Username is required",SIGNIN_PASSWORD:"Password",SIGNIN_PASSWORD_REQUIRED:"Password is required",SIGNIN_SUBMIT:"Start session",SIGNIN_ERROR:"Authentication error : Username or password are incorrect.",RECOVER:"Recover password",RECOVER_INTRO:"Set your email to recover your password",RECOVER_MAIL:"Email",RECOVER_MAIL_REQUIRED:"Email is required",RECOVER_MAIL_EMAIL:"Email does not respect the right format",RECOVER_SUBMIT:"Retrieve my password",RECOVER_BACK_TO_LOGIN:"Back to signin",RECOVER_SUCCESS:"Check your e-mails for details on how to reset your password.",RECOVER_ERROR:"Recovering error.",RECOVER_ERROR_EMAIL_NOT_EXIST:"E-Mail address isn't registered! Please check and try again",ACCESS_DENIED:"Access denied",ACCESS_DENIED_INTRO:"You do not have enough privileges to access this page.",ACCESS_DENIED_BACK_TO_LOGIN:"Back to signin",RESET_PASSWORD:"New password",RESET_PASSWORD_INTRO:"Set and confirm new password",RESET_PASSWORD_SUBMIT:"Change my password",RESET_PASSWORD_PASSWORD:"Password",RESET_PASSWORD_PASSWORD_REQUIRED:"Password is required",RESET_PASSWORD_PASSWORD_MINLENGTH:"6 chars minimum",RESET_PASSWORD_PASSWORD_MAXLENGTH:"100 chars maximum",RESET_PASSWORD_PASSWORD_CONFIRM:"Password confirmation",RESET_PASSWORD_PASSWORD_CONFIRM_REQUIRED:"Confirmation is required",RESET_PASSWORD_PASSWORD_CONFIRM_MATCH:"Confirmation does not match",RESET_PASSWORD_ERROR:"There was an error, please contact adminstrator",RESET_PASSWORD_MESSAGE_FOR_MOBILE_USER:"You can now signin into the mobile application"})}]),angular.module("adama-web").controller("RecoverPasswordCtrl",["Principal",function(e){var t=this;t.recover=function(a){t.recoverSuccess=!1,t.recoverError=!1,t.errorEmailNotExists=!1,t.loading=!0,e.resetPasswordInit(a).then(function(){t.recoverSuccess=!0}).catch(function(e){400===e.status&&"e-mail address not registered"===e.data?t.errorEmailNotExists=!0:t.recoverError=!0}).finally(function(){t.loading=!1})}}]),angular.module("adama-web").controller("ResetPasswordCtrl",["$location","$state","Principal",function(e,t,a){var r=this;r.loading=!1,r.resetError=!1,r.messageForMobileUser=!1,r.resetPassword=function(n){r.loading=!0,a.resetPasswordFinish({key:e.search().key,newPassword:n}).then(function(){var a=e.search().origin;console.log("origin",a),"front"===a?t.go("^.signin"):"mobile"===a&&(r.messageForMobileUser=!0)},function(){r.resetError=!0})}}]),angular.module("adama-web").controller("SigninCtrl",["$rootScope","$state","Auth",function(e,t,a){var r=this;r.signin=function(n,o){r.authenticationError=!1,a.login({username:n,password:o}).then(function(){"auth.signin"===e.previousStateName||null===t.get(e.previousStateName)?t.go("app.main"):t.go(e.previousStateName,e.previousStateParams)}).catch(function(){r.authenticationError=!0})}}]),angular.module("adama-web").component("binaryFileDefinition",{templateUrl:["adamaConstant",function(e){return e.adamaWebToolkitTemplateUrl.binaryFileDefinition}],bindings:{afterUploadCallback:"&?",filePattern:"@",labelKey:"@"},require:{ngModel:"ngModel"},controller:["binaryFileService",function(e){var t=this;t.isPicture="image/*"===t.filePattern,t.ongoingUpload=void 0,t.error=!1,t.upload=function(a){angular.isArray(a)&&(a=a[0]),t.ngModel.$setValidity("loading",!1),t.error=!1,t.ongoingUpload=e.uploadFile(a,t.isPicture),t.ongoingUpload.then(function(e){var a=e.data;return t.afterUploadCallback?t.afterUploadCallback({newFile:a}):a}).then(function(e){t.ngModel.$setViewValue(e)},function(){t.error=!0,t.ngModel.$setViewValue(void 0)}).finally(function(){t.ngModel.$setValidity("loading",!0),t.ongoingUpload=void 0})},t.resetFile=function(){t.ngModel.$setViewValue(void 0)}}]}),angular.module("adama-web").config(["$translateProvider",function(e){e.translations("fr",{CRUD_BACK_TO_LIST:"Retour à la liste",CRUD_CANCEL:"Annuler",CRUD_CONFIRM_DELETE:"Confirmer la suppression",CRUD_CONFIRM_EDIT:"Editer",CRUD_CONFIRM_EXPORT:"Confirmer l'export",CRUD_CONFIRM_IMPORT:"Confirmer l'import",CRUD_CONFIRM_SAVE:"Créer",CRUD_DELETE_MESSAGE:"Etes-vous certain de vouloir supprimer ?",CRUD_DELETE_SUCCESS:"Suppression avec succès.",CRUD_DELETE_ERROR:"Erreur, impossible de supprimer.",CRUD_EXPORT_XLS_MESSAGE:"Vous vous apprétez à exporter toutes les données dans une feuille de calcul Excel (XLS).",CRUD_EXPORT_XLS_SUCCESS:"Exportation avec succès.",CRUD_EXPORT_XLS_ERROR:"Erreur, impossible d'exporter.",CRUD_IMPORT_XLS_MESSAGE:"Sélectionnez un fichier Excel puis validez pour un import massif de données.",CRUD_IMPORT_XLS_SUCCESS:"Importation avec succès.",CRUD_IMPORT_XLS_ERROR:"Erreur, impossible d'importer.",CRUD_NEW:"Nouveau",CRUD_MASS_IMPORT:"Import massif",CRUD_MASS_EXPORT:"Export massif",CRUD_EDIT_SUCCESS:"Enregistrement avec succès.",CRUD_NEW_SUCCESS:"Création avec succès.",CRUD_SAVE_ERROR:"Erreur, impossible de sauvegarder.",CRUD_FORM_ERROR_REQUIRED:"Le champs est obligatoire.",CRUD_FORM_ERROR_NUMBER:"Le champs est un nombre.",CRUD_FORM_ERROR_MIN:"Le champs doit être supérieur à {{ min }}.",CRUD_FORM_ERROR_MAX:"Le champs doit être inférieur à {{ max }}.",CRUD_FORM_ERROR_MINLENGTH:"Le champs doit dépasser {{ minlength }} caractères.",CRUD_FORM_ERROR_MAXLENGTH:"Le champs ne doit pas dépasser {{ maxlength }} caractères.",CRUD_FORM_ERROR_EMAIL:"Le format est invalide.",CRUD_FORM_SEARCH:"Recherche",CRUD_FORM_SEARCH_SUBMIT:"Rechercher",CRUD_ACTION_VIEW:"Détails",CRUD_ACTION_EDIT:"Editer",CRUD_ACTION_DELETE:"Supprimer"}),e.translations("en",{CRUD_BACK_TO_LIST:"Back to list",CRUD_CANCEL:"Cancel",CRUD_CONFIRM_DELETE:"Confirm delete",CRUD_CONFIRM_EDIT:"Edit",CRUD_CONFIRM_EXPORT:"Confirm export",CRUD_CONFIRM_IMPORT:"Confirm import",CRUD_CONFIRM_SAVE:"Save",CRUD_DELETE_MESSAGE:"Are you sure you want to delete ?",CRUD_DELETE_SUCCESS:"Delete successfull.",CRUD_DELETE_ERROR:"Error, impossible to delete.",CRUD_EXPORT_XLS_MESSAGE:"You're about to export all the data into an Excel spreadsheet (XLS).",CRUD_EXPORT_XLS_SUCCESS:"Export successfull.",CRUD_EXPORT_XLS_ERROR:"Error, impossible to export.",CRUD_IMPORT_XLS_MESSAGE:"Select an Excel file and submit in order to mass import data.",CRUD_IMPORT_XLS_SUCCESS:"Import successfull.",CRUD_IMPORT_XLS_ERROR:"Error, impossible to import.",CRUD_NEW:"New",CRUD_MASS_IMPORT:"Mass import",CRUD_MASS_EXPORT:"Mass export",CRUD_EDIT_SUCCESS:"Save successfull.",CRUD_NEW_SUCCESS:"Creation successful.",CRUD_SAVE_ERROR:"Error, impossible to save.",CRUD_FORM_ERROR_REQUIRED:"This field is required.",CRUD_FORM_ERROR_NUMBER:"This field is a number.",CRUD_FORM_ERROR_MIN:"This field must be greater than {{ min }}.",CRUD_FORM_ERROR_MINLENGTH:"This field must be lower than {{ max }}.",CRUD_FORM_ERROR_MAX:"This field must be longer than {{ minlength }} characters.",CRUD_FORM_ERROR_MAXLENGTH:"This field cannot be longer than {{ maxlength }} characters.",CRUD_FORM_ERROR_EMAIL:"Format is invalid.",CRUD_FORM_SEARCH:"Search",CRUD_FORM_SEARCH_SUBMIT:"Search",CRUD_ACTION_VIEW:"View details",CRUD_ACTION_EDIT:"Edit",CRUD_ACTION_DELETE:"Delete"})}]),angular.module("adama-web").component("btnConfirmEdit",{templateUrl:["adamaConstant",function(e){return e.adamaWebToolkitTemplateUrl.btnConfirmEdit}],bindings:{entity:"<",entityGenericResource:"<",afterActionCallback:"&",form:"<"},controller:["AlertService",function(e){var t=this;t.isEdition=!!t.entity&&!!t.entity.id,t.save=function(){var a;a=t.isEdition?t.entityGenericResource.update:t.entityGenericResource.save,a(t.entity).$promise.then(function(a){t.isEdition?e.success("CRUD_EDIT_SUCCESS"):e.success("CRUD_NEW_SUCCESS"),t.afterActionCallback({newEntity:a})})}}]}),angular.module("adama-web").component("btnCreate",{templateUrl:["adamaConstant",function(e){return e.adamaWebToolkitTemplateUrl.btnCreate}],transclude:!0,bindings:{disableCreate:"<",disableMassImport:"<",disableMassExport:"<",disableAdditionnalAction:"<"}}),angular.module("adama-web").component("crudActionDropdown",{templateUrl:["adamaConstant",function(e){return e.adamaWebToolkitTemplateUrl.crudActionDropdown}],transclude:!0,bindings:{routeMapping:"<",disableView:"<",disableEdit:"<",disableDelete:"<"}}),angular.module("adama-web").component("crudCustomFilter",{templateUrl:["adamaConstant",function(e){return e.adamaWebToolkitTemplateUrl.crudCustomFilter}],bindings:{tableParams:"<",searchValue:"<",labelKey:"@"},controller:function(){var e=this;e.displayFiltered=function(){e.tableParams.filter({business:e.searchValue}),e.tableParams.page(1),e.tableParams.reload()}}}),angular.module("adama-web").controller("CrudDeleteCtrl",["entity","title",function(e,t){var a=this;a.entity=e,a.title=t}]),angular.module("adama-web").controller("CrudEditCtrl",["$state","entity","EntityGenericResource",function(e,t,a){var r=this;r.isEdition=!!t&&!!t.id,r.entity=t,r.entityGenericResource=a,r.afterActionCallback=function(t){r.isEdition?r.entity=t:e.go("^.edit",{entityId:t.id})}}]),angular.module("adama-web").controller("CrudExportXlsCtrl",["EntityGenericResource","title",function(e,t){var a=this;a.entityGenericResource=e,a.title=t}]),angular.module("adama-web").controller("CrudImportXlsCtrl",["EntityGenericResource","title",function(e,t){var a=this;a.entityGenericResource=e,a.title=t}]),angular.module("adama-web").controller("CrudListCtrl",["EntityGenericResource","NgTableParams",function(e,t){var a=this;a.tableParams=new t({},{total:0,getData:function(t){var a=t.sorting(),r=[];if(!angular.equals({},a))for(var n in a)a.hasOwnProperty(n)&&r.push(n+","+a[n]);var o=angular.extend({},{page:t.page()-1,size:t.count(),sort:r,search:t.filter().$},t.filter().business);return e.query(o).$promise.then(function(e){return t.total(e.$metadata.totalItems),e})}})}]),angular.module("adama-web").component("crudSearchField",{templateUrl:["adamaConstant",function(e){return e.adamaWebToolkitTemplateUrl.crudSearchField}],bindings:{tableParams:"<"},controller:function(){var e=this;e.search=function(){e.tableParams.filter({$:e.searchValue}),e.tableParams.page(1),e.tableParams.reload()}}}),angular.module("adama-web").controller("CrudViewCtrl",["entity",function(e){var t=this;t.entity=e}]),angular.module("adama-web").component("modalBtnCancel",{templateUrl:["adamaConstant",function(e){return e.adamaWebToolkitTemplateUrl.modalBtnCancel}],bindings:{afterActionCallback:"&"}}),angular.module("adama-web").component("modalBtnConfirmDelete",{templateUrl:["adamaConstant",function(e){return e.adamaWebToolkitTemplateUrl.modalBtnConfirmDelete}],bindings:{entity:"<",afterActionCallback:"&"},controller:["AlertService",function(e){var t=this;t.confirmDelete=function(){t.entity.$delete().then(function(){e.success("CRUD_DELETE_SUCCESS"),t.afterActionCallback()}).catch(function(){e.error("CRUD_DELETE_ERROR")})}}]}),angular.module("adama-web").component("modalBtnConfirmExportXls",{templateUrl:["adamaConstant",function(e){return e.adamaWebToolkitTemplateUrl.modalBtnConfirmExportXls}],bindings:{entityGenericResource:"<",afterActionCallback:"&"},controller:["AlertService",function(e){var t=this;t.loading=!1,t.confirmExportXls=function(){t.loading=!0,t.entityGenericResource.massExportXls().$promise.then(function(){e.success("CRUD_EXPORT_XLS_SUCCESS"),t.afterActionCallback()}).catch(function(){e.error("CRUD_EXPORT_XLS_ERROR")}).finally(function(){t.loading=!1})}}]}),angular.module("adama-web").component("modalBtnConfirmImportXls",{templateUrl:["adamaConstant",function(e){return e.adamaWebToolkitTemplateUrl.modalBtnConfirmImportXls}],bindings:{entityGenericResource:"<",afterActionCallback:"&",file:"<"},controller:["AlertService",function(e){var t=this;t.loading=!1,t.confirmImportXls=function(){var a=t.file;t.loading=!0,t.entityGenericResource.massImportXls({file:a}).$promise.then(function(){e.success("CRUD_IMPORT_XLS_SUCCESS"),t.afterActionCallback()},function(){e.error("CRUD_IMPORT_XLS_ERROR")}).finally(function(){t.loading=!1})}}]}),angular.module("adama-web").directive("dsAuthorities",["$parse","adamaConstant",function(e,t){return{scope:!1,link:function(a,r,n){var o=t.authorities;e(n.data).assign(a,o)}}}]),angular.module("adama-web").directive("dsBinaryFileUrl",["$parse","binaryFileService",function(e,t){return{scope:!1,link:function(a,r,n){var o=function(r){n.output&&(r=angular.copy(r)),angular.isArray(r)||(r=[r]),t.initUrlForBinaryFiles(r).then(function(){n.output&&e(n.output).assign(a,r)})};a.$watch(n.input,function(){var t=e(n.input)(a);t&&o(t)})}}}]),angular.module("adama-web").directive("dsLanguage",["$parse","language",function(e,t){return{scope:!1,link:function(a,r,n){t.getAll().then(function(t){e(n.data).assign(a,t)})}}}]),angular.module("adama-web").directive("dsPrincipalIdentity",["$parse","Principal",function(e,t){return{scope:!1,link:function(a,r,n){t.identity().then(function(t){e(n.data).assign(a,t)})}}}]),angular.module("adama-web").directive("layoutFix",["$rootScope","$timeout",function(e,t){return{scope:{addEvent:"="},restrict:"E",link:function(a){a.addEvent&&e.$on("$viewContentLoaded",function(){$.AdminLTE.layout.fix()}),t(function(){$.AdminLTE.layout.fix()},0)}}}]),angular.module("adama-web").directive("lazyControl",["$rootScope","$filter",function(e,t){var a=t("translate");return{link:function(t,r,n){var o,i,s,l,u=!1;"checkbox"===n.type?(r.wrap('<div class="checkbox"><label></label></div>'),r.after("<span></span>"),l=r.next().eq(0)):(o=n.ngModel.replace(/\./g,"_"),i=' for="'+o+'"',s=n.labelScreenOnly||!1,s&&(i+=' class="sr-only"'),n.placeholder&&(u=!0),r.attr("id",o),r.addClass("form-control"),r.wrap('<div class="form-group"></div>'),r.before("<label"+i+"></label>"),l=r.prev().eq(0));var c=function(){var e=a(n.lazyControlLabelKey);l.html(e),u||r.attr("placeholder",e)};c(),e.$on("$translateChangeSuccess",function(){c()})}}}]),angular.module("adama-web").directive("mainNavbarAutomaticClosing",function(){return{scope:{},restrict:"E",link:function(){$(".sidebar-menu").on("click","a",function(){$("body").removeClass("sidebar-open")})}}}),angular.module("adama-web").filter("min",function(){return Math.min}),angular.module("adama-web").directive("hasAnyAuthority",["Principal",function(e){return{restrict:"A",link:function(t,a,r){var n=function(){a.removeClass("hidden")},o=function(){a.addClass("hidden")},i=r.hasAnyAuthority.replace(/\s+/g,"").split(","),s=function(t){var a;t&&n(),a=e.hasAnyAuthority(i),a?n():o()};i.length>0&&(s(!0),t.$watch(function(){return e.isAuthenticated()},function(){s(!0)}))}}}]),angular.module("adama-web").directive("hasAuthority",["Principal",function(e){return{restrict:"A",link:function(t,a,r){var n=function(){a.removeClass("hidden")},o=function(){a.addClass("hidden")},i=r.hasAuthority.replace(/\s+/g,""),s=function(t){t&&n(),e.hasAuthority(i).then(function(e){e?n():o()})};i.length>0&&(s(!0),t.$watch(function(){return e.isAuthenticated()},function(){s(!0)}))}}}]),angular.module("adama-web").factory("authExpiredInterceptor",["$injector","$q","$log","adamaConstant",function(e,t,a,r){var n=function(){var t;return function(){return t||(t=e.get("$http"))}}(),o=function(){var t;return function(){return t||(t=e.get("adamaTokenService"))}}();return{responseError:function(e){var i=a.getInstance("adama-web.interceptors"),s=e.config;return 401===e.status&&s&&0===s.url.indexOf(r.apiBase)&&0!==s.url.indexOf(r.apiBase+"login/authenticate")?(i.debug("authExpiredInterceptor error 401, refresh token"),o().refreshAndGetToken().then(function(){return i.debug("authExpiredInterceptor token is refresh, reset Authorization header"),s.headers.Authorization=void 0,n()(s)})):t.reject(e)}}}]),angular.module("adama-web").factory("authInterceptor",["$injector","$log","adamaConstant",function(e,t,a){var r=function(){var t;return function(){return t||(t=e.get("adamaTokenService"))}}();return{request:function(e){var n=t.getInstance("adama-web.interceptors");return e.headers=e.headers||{},e.headers.Authorization||0!==e.url.indexOf(a.apiBase)?e:(n.debug("authInterceptor need authorization, getting token"),r().getToken().then(function(t){return n.debug("add token to http config"),t&&(e.headers.Authorization="Bearer "+t),e}))}}}]),angular.module("adama-web").factory("errorHandlerInterceptor",["$q","$rootScope",function(e,t){return{responseError:function(a){return 401===a.status&&"Bad credentials"===a.data||t.$emit("Adama.httpError",a),e.reject(a)}}}]),angular.module("adama-web").factory("notificationInterceptor",["$q","AlertService",function(e,t){return{response:function(e){var a=e.headers("X-Adama-alert");return angular.isString(a)&&t.success(a,{param:e.headers("X-Adama-params")}),e}}}]),angular.module("adama-web").factory("User",["$resource","adamaConstant","adamaResourceConfig",function(e,t,a){var r=angular.extend({},a,{save:{method:"POST",params:{urlCreatePassword:"@urlCreatePassword"}}});return e(t.apiBase+"users/:id",{},r)}]),angular.module("adama-web").factory("adamaResourceConfig",["ParseLinks","binaryService",function(e,t){return{query:{method:"GET",isArray:!0,transformResponse:function(t,a,r){return t=angular.fromJson(t),200===r&&(t.$metadata={links:e.parse(a("link")),totalItems:parseInt(a("X-Total-Count"),10)}),t},interceptor:{response:function(e){return e.resource.$metadata=e.data.$metadata,e.resource}}},get:{method:"GET"},save:{method:"POST"},update:{method:"PUT"},delete:{method:"DELETE",params:{id:"@id"}},massExportXls:{method:"GET",responseType:"arraybuffer",params:{all:!0},headers:{Accept:"application/vnd.ms-excel"},transformResponse:t.transformResponseToExcel},massImportXls:{method:"POST",params:{method:"import-xls"},headers:{"Content-Type":void 0},transformRequest:function(e){var t=new window.FormData,a=e.file;return t.append("file",a,a.name),t}}}}]),angular.module("adama-web").factory("adamaTokenService",["$rootScope","$http","$q","$state","$log","jwtHelper","localStorageService","adamaConstant",function(e,t,a,r,n,o,i,s){var l=n.getInstance("adama-web.service"),u={},c=function(e){return u.getToken().then(function(t){if(t){var a=o.decodeToken(t);return e?a[e]:a}})};return u.getUsername=function(){return c("sub")},u.setToken=function(e){i.set("token",e)},u.setRefreshToken=function(e){i.set("refresh_token",e)},u.getToken=function(){var e=i.get("token");return e&&o.isTokenExpired(e)?(l.debug("adamaTokenService.getToken token is expired"),u.refreshAndGetToken()):a.when(e)},u.refreshAndGetToken=function(){var e=i.get("token");if(!e)return console.error("no token, redirect to signin"),r.go("auth.signin"),a.reject("refreshAndGetToken : no token");var n=i.get("refresh_token");return t({method:"POST",url:s.apiBase+"login/refresh",headers:{Authorization:"Bearer "+e},data:{refresh_token:n}}).then(function(e){var t=e.data,a=t.access_token;return u.setToken(a),a},function(e){return console.error("error while refreshing user token, redirect to signin",e),r.go("auth.signin"),u.setToken(void 0),a.reject(e)})},u}]),angular.module("adama-web").constant("adamaConstant",{apiBase:"http://localhost:13337/",adamaWebToolkitTemplateUrl:{password:"adama-web/account/password/password.html",settings:"adama-web/account/settings/settings.html",adamaAlertError:"adama-web/alert/adama-alert-error.html",adamaAlert:"adama-web/alert/adama-alert.html",arkFooter:"adama-web/ark/ark-footer/ark-footer.html",arkHeader:"adama-web/ark/ark-header/ark-header.html",languageSelector:"adama-web/ark/language-selector/language-selector.html",mainNavigation:"adama-web/ark/menu/main-navigation.html",selectAll:"adama-web/ark/select-all/select-all.html",userInfo:"adama-web/ark/user-info/user-info.html",viewAttribute:"adama-web/ark/view-attribute/view-attribute.html",resetPassword:"adama-web/auth/resetPassword.html",signin:"adama-web/auth/signin.html",recoverPassword:"adama-web/auth/recoverPassword.html",accessDenied:"adama-web/auth/accessDenied.html",binaryFileDefinition:"adama-web/binary-file-definition/binary-file-definition.html",btnConfirmEdit:"adama-web/crud/btn-confirm-edit.html",btnCreate:"adama-web/crud/btn-create.html",crudActionDropdown:"adama-web/crud/crud-action-dropdown.html",crudCustomFilter:"adama-web/crud/crud-custom-filter.html",crudSearchField:"adama-web/crud/crud-search-field.html",modalBtnConfirmDelete:"adama-web/crud/modal-btn-confirm-delete.html",modalBtnCancel:"adama-web/crud/modal-btn-cancel.html",modalBtnConfirmExportXls:"adama-web/crud/modal-btn-confirm-export-xls.html",modalBtnConfirmImportXls:"adama-web/crud/modal-btn-confirm-import-xls.html",users:"adama-web/user/user-list.html",userEdit:"adama-web/user/user-edit.html",userCreate:"adama-web/user/user-edit.html",userView:"adama-web/user/user-view.html",userDelete:"adama-web/crud/crud-delete.html",usersImportXls:"adama-web/crud/crud-import-xls.html",usersExportXls:"adama-web/crud/crud-export-xls.html"},authorities:["ROLE_ADMIN","ROLE_USER","ROLE_MANAGER"],userAuthorities:["ROLE_MANAGER","ROLE_ADMIN"],urlCreatePassword:"replace/me/with/your/project/specific/url/reset-password.html?origin=front"}),angular.module("adama-web").factory("authBackendService",["$http","adamaConstant","adamaTokenService",function(e,t,a){var r={};return r.login=function(r){return e.post(t.apiBase+"login/authenticate",{username:r.username,password:r.password}).then(function(e){var t=e.data;a.setToken(t.access_token),a.setRefreshToken(t.refresh_token)})},r.logout=function(){a.setToken(void 0)},r}]),angular.module("adama-web").factory("Auth",["$rootScope","$state","$q","$translate","Principal","authBackendService",function(e,t,a,r,n,o){var i={};return i.login=function(e){var t=a.defer();return o.login(e).then(function(e){n.identity(!0).then(function(a){a.langKey&&r.use(a.langKey),t.resolve(e)})}).catch(function(e){i.logout(),t.reject(e)}),t.promise},i.logout=function(){o.logout(),n.authenticate(null),e.previousStateName=void 0,e.previousStateNameParams=void 0},i}]),angular.module("adama-web").service("Base64",function(){var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";this.encode=function(t){for(var a,r,n,o,i,s="",l="",u="",c=0;c<t.length;)a=t.charCodeAt(c++),r=t.charCodeAt(c++),l=t.charCodeAt(c++),n=a>>2,o=(3&a)<<4|r>>4,i=(15&r)<<2|l>>6,u=63&l,isNaN(r)?i=u=64:isNaN(l)&&(u=64),s=s+e.charAt(n)+e.charAt(o)+e.charAt(i)+e.charAt(u),
a=r=l="",n=o=i=u="";return s},this.decode=function(t){var a,r,n,o,i,s="",l="",u="",c=0;for(t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"");c<t.length;)n=e.indexOf(t.charAt(c++)),o=e.indexOf(t.charAt(c++)),i=e.indexOf(t.charAt(c++)),u=e.indexOf(t.charAt(c++)),a=n<<2|o>>4,r=(15&o)<<4|i>>2,l=(3&i)<<6|u,s+=String.fromCharCode(a),64!==i&&(s+=String.fromCharCode(r)),64!==u&&(s+=String.fromCharCode(l)),a=r=l="",n=o=i=u=""}}),angular.module("adama-web").factory("binaryFileService",["$http","$q","Upload","adamaConstant",function(e,t,a,r){var n={};return n.initUrlForBinaryFiles=function(a){var n=[],o=[];return angular.forEach(a,function(e){e&&e.id&&!e.url&&(n.push(e),o.push(e.id))}),o.length?e({method:"PUT",url:r.apiBase+"files",data:o}).then(function(e){angular.forEach(n,function(t){t.url=e.data.urlList[t.id]})}):t.when()},n.uploadFile=function(e,t){return a.upload({url:r.apiBase+"files?isPicture="+t,data:{file:e},disableProgress:!0})},n}]),angular.module("adama-web").factory("binaryService",["FileSaver",function(e){var t={},a=function(t,a,r,n,o){if(200===r){var i,s=new Blob([t],{type:n}),l=a("Content-Disposition");l&&(i=l.substring("attachment;filename = ".length)),i||(i=o),e.saveAs(s,i)}return t};return t.transformResponseToPdf=function(e,t,r){return a(e,t,r,"application/pdf","file.pdf")},t.transformResponseToExcel=function(e,t,r){return a(e,t,r,"application/vnd.ms-excel","file.xls")},t}]),angular.module("adama-web").provider("language",function(){var e=["en","fr"],t=[{code:"en",labelKey:"FLAG_EN",cssCLass:"us"},{code:"fr",labelKey:"FLAG_FR",cssCLass:"fr"}];this.setLanguages=function(t){e=t},this.setSelectorData=function(e){t=e},this.$get=["$q","$http","$translate",function(a,r,n){var o={};return o.getCurrent=function(){var e=n.storage().get("NG_TRANSLATE_LANG_KEY");return angular.isUndefined(e)&&(e="en"),a.when(e)},o.getAll=function(){return a.when(e)},o.getSelectorData=function(){return a.when(t)},o}]}),angular.module("adama-web").service("ParseLinks",function(){this.parse=function(e){if(0===e.length)throw new Error("input must not be of zero length");var t=e.split(","),a={};return angular.forEach(t,function(e){var t=e.split(";");if(2!==t.length)throw new Error('section could not be split on ";"');var r=t[0].replace(/<(.*)>/,"$1").trim(),n={};r.replace(new RegExp("([^?=&]+)(=([^&]*))?","g"),function(e,t,a,r){n[t]=r});var o=n.page;angular.isString(o)&&(o=parseInt(o));var i=t[1].replace(/rel='(.*)'/,"$1").trim();a[i]=o}),a}}),angular.module("adama-web").factory("Principal",["$http","$q","$rootScope","$resource","$state","$log","adamaConstant","adamaTokenService",function(e,t,a,r,n,o,i,s){var l,u=o.getInstance("adama-web.service"),c=r(i.apiBase+"account/change_password"),d=r(i.apiBase+"account/reset_password/init",{},{}),m=r(i.apiBase+"account/reset_password/finish"),E=!1,S={};return S.isIdentityResolved=function(){return angular.isDefined(l)},S.isAuthenticated=function(){return E},S.hasAuthority=function(e){return E?this.identity().then(function(t){return t.authority&&t.authority===e},function(){return!1}):t.when(!1)},S.hasAnyAuthority=function(e){if(!E||!l||!l.authority)return!1;for(var t=0;t<e.length;t++)if(l.authority===e[t])return!0;return!1},S.authenticate=function(e){l=e,E=null!==e},S.identity=function(a){var r=t.defer();return a===!0&&(l=void 0),angular.isDefined(l)?(r.resolve(l),r.promise):(s.getUsername().then(function(a){return a?e({method:"GET",url:i.apiBase+"users/byLogin/"+a}).then(function(e){return e.data}):t.reject("not connected")}).then(function(e){l=e,E=!0,r.resolve(l)},function(){l=null,E=!1,r.resolve(l)}),r.promise)},S.authorize=function(e){return S.identity(e).then(function(){var e=S.isAuthenticated();return e&&a.toState.name&&"auth.signin"===a.toState.name?(u.debug("redirect to main as user is authenticated and is trying to access signin"),n.go("app.main",{},{location:"replace"})):a.toState.data&&a.toState.data.authorities||e?a.toState.data&&a.toState.data.authorities&&a.toState.data.authorities.length>0&&!S.hasAnyAuthority(a.toState.data.authorities)?e?(u.debug("redirect to accessDenied as user is authenticated and does not have right privileges"),n.go("auth.accessDenied",{},{location:"replace"})):(a.previousStateName=a.toState,a.previousStateNameParams=a.toStateParams,u.debug("redirect to signin as user is not authenticated and page is restricted (conf with explicit authorities on state)"),n.go("auth.signin",{},{location:"replace"})):void 0:(u.debug("redirect to signin as user is not authenticated and page is restricted (default conf with no authorities on state)"),n.go("auth.signin",{},{location:"replace"}))})},S.updateAccount=function(t){return e({method:"PUT",url:i.apiBase+"users",data:{user:t}}).then(function(){return a.$emit("auth.updateAccount",{account:t}),t})},S.changePassword=function(e){return c.save(e).$promise},S.resetPasswordInit=function(e){return d.save({mail:e,urlResetPassword:i.urlCreatePassword}).$promise},S.resetPasswordFinish=function(e){return m.save(e).$promise},S}]),angular.module("adama-web").config(["$stateProvider","adamaConstant",function(e,t){e.state("app.user",{abstract:!0,url:"/users",template:"<ui-view></ui-view>"}),e.state("app.user.list",{url:"",templateUrl:function(){return t.adamaWebToolkitTemplateUrl.users},controller:"CrudListCtrl",controllerAs:"ctrl",resolve:{EntityGenericResource:["User",function(e){return e}]},data:{pageTitle:"USER_TITLE_LIST",authorities:t.userAuthorities}}),e.state("app.user.view",{url:"/view/:entityId",templateUrl:function(){return t.adamaWebToolkitTemplateUrl.userView},controller:"CrudViewCtrl",controllerAs:"ctrl",resolve:{entity:["$stateParams","User",function(e,t){return t.get({id:e.entityId}).$promise}]},data:{pageTitle:"USER_TITLE_VIEW",authorities:t.userAuthorities}}),e.state("app.user.edit",{url:"/edit/:entityId",templateUrl:function(){return t.adamaWebToolkitTemplateUrl.userEdit},controller:"CrudEditCtrl",controllerAs:"ctrl",resolve:{entity:["$stateParams","User",function(e,t){return t.get({id:e.entityId}).$promise}],EntityGenericResource:["User",function(e){return e}]},data:{pageTitle:"USER_TITLE_EDIT",authorities:t.userAuthorities}}),e.state("app.user.create",{url:"/new",templateUrl:function(){return t.adamaWebToolkitTemplateUrl.userCreate},controller:"CrudEditCtrl",controllerAs:"ctrl",resolve:{entity:function(){},EntityGenericResource:["User",function(e){return e}]},data:{pageTitle:"USER_TITLE_NEW",authorities:t.userAuthorities}});var a=function(e,t,a,r,n,o){var i;a&&(i=["User",function(e){return e.get({id:a.entityId}).$promise}]),t.open({templateUrl:n,resolve:{entity:i,EntityGenericResource:["User",function(e){return e}],title:function(){return o}},controller:r+" as ctrl"}).result.then(function(){e.go("^",{},{reload:!0})}).catch(function(){e.go("^")})};e.state("app.user.delete",{url:"/delete/:entityId",parent:"app.user.list",onEnter:["$state","$uibModal","$stateParams","adamaConstant",function(e,t,r,n){a(e,t,r,"CrudDeleteCtrl",n.adamaWebToolkitTemplateUrl.userDelete,"USER_TITLE_DELETE")}],data:{pageTitle:"USER_TITLE_DELETE",authorities:t.userAuthorities}}),e.state("app.user.importXls",{url:"/import-xls",parent:"app.user.list",onEnter:["$state","$uibModal","adamaConstant",function(e,t,r){a(e,t,void 0,"CrudImportXlsCtrl",r.adamaWebToolkitTemplateUrl.usersImportXls,"USER_TITLE_IMPORT_XLS")}],data:{pageTitle:"USER_TITLE_IMPORT_XLS",authorities:t.userAuthorities}}),e.state("app.user.exportXls",{url:"/export-xls",parent:"app.user.list",onEnter:["$state","$uibModal","adamaConstant",function(e,t,r){a(e,t,void 0,"CrudExportXlsCtrl",r.adamaWebToolkitTemplateUrl.usersExportXls,"USER_TITLE_EXPORT_XLS")}],data:{pageTitle:"USER_TITLE_EXPORT_XLS",authorities:t.userAuthorities}})}]),angular.module("adama-web").config(["$translateProvider",function(e){e.translations("fr",{error:{userexists:"Login déjà utilisé !",emailexists:"E-mail déjà utilisé !"},USER_MENU:"Utilisateurs",USER_TITLE_DELETE:"Suppression d'un utilisateur",USER_TITLE_VIEW:"Détails d'un utilisateur",USER_TITLE_LIST:"Liste des utilisateurs",USER_TITLE_EDIT:"Editer un utilisateur",USER_TITLE_NEW:"Créer un utilisateur",USER_TITLE_IMPORT_XLS:"Importer en masse des utilisateurs",USER_TITLE_EXPORT_XLS:"Exporter en masse des utilisateurs",USER_FORM_LOGIN:"Identifiant",USER_FORM_FIRSTNAME:"Prénom",USER_FORM_LASTNAME:"Nom de famille",USER_FORM_EMAIL:"Email",USER_FORM_LANGUAGE:"Langue",USER_FORM_AUTHORITY:"Rôle",USER_LIST_LOGIN:"Identifiant",USER_LIST_MAIL:"Email",USER_LIST_LANGUAGE:"Langue",USER_LIST_AUTHORITY:"Rôle"}),e.translations("en",{error:{userexists:"Login name already used!",emailexists:"E-mail is already in use!"},USER_MENU:"Users",USER_TITLE_DELETE:"User delete",USER_TITLE_VIEW:"User details",USER_TITLE_LIST:"User list",USER_TITLE_EDIT:"User edition",USER_TITLE_NEW:"User creation",USER_TITLE_IMPORT_XLS:"Users mass import",USER_TITLE_EXPORT_XLS:"Users mass export",USER_FORM_LOGIN:"Login",USER_FORM_FIRSTNAME:"Firstname",USER_FORM_LASTNAME:"Lastname",USER_FORM_EMAIL:"Email",USER_FORM_LANGUAGE:"Language",USER_FORM_AUTHORITY:"Authority",USER_LIST_LOGIN:"Login",USER_LIST_MAIL:"Email",USER_LIST_LANGUAGE:"Language",USER_LIST_AUTHORITY:"Authority"})}]),angular.module("adama-web").config(["$stateProvider","adamaConstant",function(e,t){e.state("app.personal.password",{url:"/password",templateUrl:function(){return t.adamaWebToolkitTemplateUrl.password},controller:"PasswordCtrl",controllerAs:"ctrl",data:{pageTitle:"ACCOUNT_PASSWORD"}})}]),angular.module("adama-web").config(["$translateProvider",function(e){e.translations("fr",{ACCOUNT_PASSWORD:"Modifier mon mot de passe",ACCOUNT_PASSWORD_TITLE:"Modifier mon mot de passe",ACCOUNT_PASSWORD_NEWPASSWORD:"Mot de passe",ACCOUNT_PASSWORD_NEWPASSWORD_PLACEHOLDER:"Mot de passe ?",ACCOUNT_PASSWORD_NEWPASSWORD_REQUIRED:"Le mot de passe est obligatoire",ACCOUNT_PASSWORD_NEWPASSWORD_MINLENGTH:"Le mot de passe doit être composé d'au moins 5 caractères.",ACCOUNT_PASSWORD_NEWPASSWORD_MAXLENGTH:"Le mot de passe doit être composé d'au plus 50 caractères.",ACCOUNT_PASSWORD_CONFIRM_NEWPASSWORD:"Confirmation du mot de passe",ACCOUNT_PASSWORD_CONFIRM_NEWPASSWORD_PLACEHOLDER:"Confirmation du mot de passe ?",ACCOUNT_PASSWORD_CONFIRM_NEWPASSWORD_REQUIRED:"La confirmation du mot de passe est obligatoire",ACCOUNT_PASSWORD_CONFIRM_NEWPASSWORD_MINLENGTH:"La confirmation du mot de passe doit être composé d'au moins 5 caractères.",ACCOUNT_PASSWORD_CONFIRM_NEWPASSWORD_MAXLENGTH:"La confirmation du mot de passe doit être composé d'au plus 50 caractères.",ACCOUNT_PASSWORD_CONFIRM_NEWPASSWORD_PATTERN:"Les mots de passe ne sont pas égaux.",ACCOUNT_PASSWORD_SUBMIT:"Enregistrer",ACCOUNT_PASSWORD_SAVE_SUCCESS:"Le mot de passe a été changé avec succès.",ACCOUNT_PASSWORD_SAVE_ERROR:"Le mot de passe n'a pu être changé."}),e.translations("en",{ACCOUNT_PASSWORD:"Change my password",ACCOUNT_PASSWORD_TITLE:"Change my password",ACCOUNT_PASSWORD_NEWPASSWORD:"Password",ACCOUNT_PASSWORD_NEWPASSWORD_PLACEHOLDER:"Password ?",ACCOUNT_PASSWORD_NEWPASSWORD_REQUIRED:"Your password is required.",ACCOUNT_PASSWORD_NEWPASSWORD_MINLENGTH:"Your password is required to be at least 5 characters.",ACCOUNT_PASSWORD_NEWPASSWORD_MAXLENGTH:"Your password cannot be longer than 50 characters.",ACCOUNT_PASSWORD_CONFIRM_NEWPASSWORD:"Password confirmation",ACCOUNT_PASSWORD_CONFIRM_NEWPASSWORD_PLACEHOLDER:"Password confirmation ?",ACCOUNT_PASSWORD_CONFIRM_NEWPASSWORD_REQUIRED:"Your confirmation password is required.",ACCOUNT_PASSWORD_CONFIRM_NEWPASSWORD_MINLENGTH:"Your confirmation password is required to be at least 5 characters.",ACCOUNT_PASSWORD_CONFIRM_NEWPASSWORD_MAXLENGTH:"Your confirmation password cannot be longer than 50 characters.",ACCOUNT_PASSWORD_CONFIRM_NEWPASSWORD_PATTERN:"Password and confirmation do not match.",ACCOUNT_PASSWORD_SUBMIT:"Save",ACCOUNT_PASSWORD_SAVE_SUCCESS:"Password successfully changed.",ACCOUNT_PASSWORD_SAVE_ERROR:"Password could not be changed."})}]),angular.module("adama-web").controller("PasswordCtrl",["Principal","AlertService",function(e,t){var a=this;e.identity().then(function(e){a.account=e}),a.changePassword=function(){e.changePassword(a.password).then(function(){t.success("ACCOUNT_PASSWORD_SAVE_SUCCESS")}).catch(function(){t.error("ACCOUNT_PASSWORD_SAVE_ERROR")})}}]),angular.module("adama-web").config(["$stateProvider","adamaConstant",function(e,t){e.state("app.personal.settings",{url:"/settings",templateUrl:function(){return t.adamaWebToolkitTemplateUrl.settings},controller:"SettingsCtrl",controllerAs:"ctrl",data:{pageTitle:"ACCOUNT_SETTINGS"}})}]),angular.module("adama-web").config(["$translateProvider",function(e){e.translations("fr",{ACCOUNT_SETTINGS:"Mon profil",ACCOUNT_SETTINGS_TITLE:"Mon profil",ACCOUNT_SETTINGS_FIRSTNAME:"Prénom",ACCOUNT_SETTINGS_FIRSTNAME_PLACEHOLDER:"Prénom ?",ACCOUNT_SETTINGS_FIRSTNAME_REQUIRED:"Votre prénom est obligatoire.",ACCOUNT_SETTINGS_FIRSTNAME_MAXLENGTH:"Votre prénom doit être composé d'au plus 50 caractères.",ACCOUNT_SETTINGS_LASTNAME:"Nom de famille",ACCOUNT_SETTINGS_LASTNAME_PLACEHOLDER:"Nom de famille ?",ACCOUNT_SETTINGS_LASTNAME_REQUIRED:"Votre nom de famille est obligatoire.",ACCOUNT_SETTINGS_LASTNAME_MAXLENGTH:"Votre nom de famille doit être composé d'au plus 50 caractères.",ACCOUNT_SETTINGS_EMAIL:"Email",ACCOUNT_SETTINGS_EMAIL_PLACEHOLDER:"Email ?",ACCOUNT_SETTINGS_EMAIL_REQUIRED:"Votre email est obligatoire.",ACCOUNT_SETTINGS_EMAIL_EMAIL:"Votre email est invalide.",ACCOUNT_SETTINGS_EMAIL_MAXLENGTH:"Votre email doit être composé d'au plus 100 caractères.",ACCOUNT_SETTINGS_LANGUAGE:"Langue",ACCOUNT_SETTINGS_SUBMIT:"Enregistrer",ACCOUNT_SETTINGS_SAVE_SUCCESS:"Enregistrement du profil avec succès.",ACCOUNT_SETTINGS_SAVE_ERROR:"Impossible d'enregistrer le profil."}),e.translations("en",{ACCOUNT_SETTINGS:"My profile",ACCOUNT_SETTINGS_TITLE:"My profile",ACCOUNT_SETTINGS_FIRSTNAME:"First name",ACCOUNT_SETTINGS_FIRSTNAME_PLACEHOLDER:"First name ?",ACCOUNT_SETTINGS_FIRSTNAME_REQUIRED:"Your first name is required.",ACCOUNT_SETTINGS_FIRSTNAME_MAXLENGTH:"Your first name cannot be longer than 50 characters.",ACCOUNT_SETTINGS_LASTNAME:"Last name",ACCOUNT_SETTINGS_LASTNAME_PLACEHOLDER:"Last name ?",ACCOUNT_SETTINGS_LASTNAME_REQUIRED:"Your last name is required.",ACCOUNT_SETTINGS_LASTNAME_MAXLENGTH:"Your last name cannot be longer than 50 characters.",ACCOUNT_SETTINGS_EMAIL:"Email",ACCOUNT_SETTINGS_EMAIL_PLACEHOLDER:"Email ?",ACCOUNT_SETTINGS_EMAIL_REQUIRED:"Your e-mail is required.",ACCOUNT_SETTINGS_EMAIL_EMAIL:"Your e-mail is invalid.",ACCOUNT_SETTINGS_EMAIL_MAXLENGTH:"Your e-mail cannot be longer than 100 characters.",ACCOUNT_SETTINGS_LANGUAGE:"Language",ACCOUNT_SETTINGS_SUBMIT:"Save",ACCOUNT_SETTINGS_SAVE_SUCCESS:"Profile successfully saved.",ACCOUNT_SETTINGS_SAVE_ERROR:"Profile could not be saved."})}]),angular.module("adama-web").controller("SettingsCtrl",["Principal","language","AlertService","$translate",function(e,t,a,r){var n=this,o=function(e){return{activated:e.activated,email:e.email,firstName:e.firstName,langKey:e.langKey,lastName:e.lastName,login:e.login}};e.identity().then(function(e){n.settingsAccount=o(e)}),n.save=function(){e.updateAccount(n.settingsAccount).then(function(){return e.identity(!0).then(function(e){n.settingsAccount=o(e),t.getCurrent().then(function(e){n.settingsAccount.langKey!==e&&r.use(n.settingsAccount.langKey),a.success("ACCOUNT_SETTINGS_SAVE_SUCCESS")})})}).catch(function(){a.error("ACCOUNT_SETTINGS_SAVE_ERROR")})}}]),angular.module("adama-web").component("arkFooter",{templateUrl:["adamaConstant",function(e){return e.adamaWebToolkitTemplateUrl.arkFooter}]}),angular.module("adama-web").config(["$translateProvider",function(e){e.translations("fr",{TOGGLE_NAVIGATION:"Navigation",USERINFO_PROFILE:"Profil",USERINFO_PASSWORD:"Mot de passe",USERINFO_SIGNOUT:"Déconnection"}),e.translations("en",{TOGGLE_NAVIGATION:"Toggle navigation",USERINFO_PROFILE:"Profile",USERINFO_PASSWORD:"Password",USERINFO_SIGNOUT:"Sign out"})}]),angular.module("adama-web").component("arkHeader",{templateUrl:["adamaConstant",function(e){return e.adamaWebToolkitTemplateUrl.arkHeader}]}),angular.module("adama-web").component("languageSelector",{templateUrl:["adamaConstant",function(e){return e.adamaWebToolkitTemplateUrl.languageSelector}],controller:["$rootScope","$translate","language",function(e,t,a){var r=this;r.changeLanguage=function(e){t.use(e)};var n=function(){r.currentLanguage=t.use(),0===r.currentLanguage.indexOf("en")&&(r.currentLanguage="us")};e.$on("$translateChangeSuccess",function(){n()}),n(),a.getSelectorData().then(function(e){r.languages=e})}]}),angular.module("adama-web").component("mainNavigation",{templateUrl:["adamaConstant",function(e){return e.adamaWebToolkitTemplateUrl.mainNavigation}],controller:["$rootScope","$filter","$location","$scope","menuService",function(e,t,a,r,n){var o=this,i=t("translate"),s=function(e){e&&angular.forEach(e,function(e){e.label=i(e.labelKey),s(e.subItems)})};o.menuItems=n.getItems();var l=function(){s(o.menuItems)};l(),e.$on("$translateChangeSuccess",l);var u=function(){o.menuItems&&angular.forEach(o.menuItems,function(e){e.active=!!e.url&&0===a.path().indexOf(e.url.substring(1))})};r.$watch(function(){return a.path()},u),r.$watch(function(){return o.menuItems},u)}]}),angular.module("adama-web").provider("menuService",function(){var e=[];this.addItem=function(t){"right"!==t.position&&(t.position="left"),e.push(t)},this.$get=["$rootScope",function(t){var a={};return angular.forEach(e,function(e){e.badge&&e.badge.event&&t.$on(e.badge.event,function(t,a){e.badge.value=a.value})}),a.getItems=function(){return e},a}]}),angular.module("adama-web").component("selectAll",{templateUrl:["adamaConstant",function(e){return e.adamaWebToolkitTemplateUrl.selectAll}],bindings:{entityList:"<"},controller:function(){var e=this;e.isAllChecked=!1,e.checkAll=function(){e.isAllChecked=!e.isAllChecked,angular.forEach(e.entityList,function(t){t.isSelected=e.isAllChecked})}}}),angular.module("adama-web").component("userInfo",{templateUrl:["adamaConstant",function(e){return e.adamaWebToolkitTemplateUrl.userInfo}],controller:["$rootScope","$state","Auth",function(e,t,a){var r=this;r.signout=function(){a.logout(),t.go("auth.signin")},e.$on("auth.updateAccount",function(e,t){r.account=t.account})}]}),angular.module("adama-web").component("viewAttribute",{templateUrl:["adamaConstant",function(e){return e.adamaWebToolkitTemplateUrl.viewAttribute}],transclude:!0,bindings:{labelKey:"@",value:"<",valueKey:"@value"},controller:function(){}});
//# sourceMappingURL=adama-web-min.js.map
